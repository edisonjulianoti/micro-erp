function tpassword_start(a){$(`#${a} button`).click(function(){var b=$(this).find("i"),c=$(this).prev();b.toggleClass("fa-eye-slash");b.toggleClass("fa-eye");"text"==c.attr("type")?c.attr("type","password"):c.attr("type","text")})};function tdialog_start(a,b){$.fn.modal.Constructor.prototype._enforceFocus=function(){};$(a).modal({backdrop:!0,keyboard:!0});if("undefined"!=typeof b)$(a).on("hidden.bs.modal",function(){b();tdialog_close(a.substring(1))});else $(a).on("hidden.bs.modal",function(){tdialog_close(a.substring(1))})}function tdialog_close(a){$(".modal-backdrop").last().remove();$("#"+a).modal("hide");$("body").removeClass("modal-open");setTimeout(function(){$("#"+a).remove()},300)};function tjquerydialog_start(a,b,c,d,h,f,e,m,t,k,g,l,q){var w="window-wrapper"==$(a).parent().attr("role")?"#"+$(a).parent().attr("id"):"body",v="Close";"undefined"!==typeof Application.translation&&"undefined"!==typeof Application.translation[Adianti.language].close&&(v=Application.translation[Adianti.language].close);$(a).dialog({modal:b,stack:!1,zIndex:2E3,draggable:c,closeText:v,resizable:d,closeOnEscape:l,height:f,width:h,appendTo:w,dialogClass:q,beforeClose:function(){return"function"==typeof g?
(g(),!1):!0},close:function(u,D){$(this).remove();$(".tooltip.fade").remove();u=$(this).attr("name");$("[window_name="+u+"]").remove()},buttons:k});$(".ui-dialog").last().focus();$(a).closest(".ui-dialog").css({zIndex:t});$(".ui-widget-overlay").css({zIndex:100});0<e&&$(a).closest(".ui-dialog").css({top:e+"px"});0<m&&$(a).closest(".ui-dialog").css({left:m+"px"})}
function tjquerydialog_block_ui(){$(document).ready(function(){$(".ui-dialog").css("pointer-events","none");$(".ui-dialog-content").css("opacity","0.5")})}function tjquerydialog_unblock_ui(){$(".ui-dialog").css("pointer-events","all");$(".ui-dialog-content").css("opacity","")};function tform_send_data(a,b,c,d,h){if(0<parseInt(h))setTimeout(function(){tform_send_data(a,b,c,d,0)},h);else try{if("#"==b.substr(0,1))var f=$(b),e=[],m=[];else f=$("form[name="+a+"] [name='"+b+"']"),e=$("form[name="+a+"] [name='"+b+"[]']"),m=$("form[name="+a+"] [widget='tmultifile'][name='file_"+b+"[]']");if(f.length||e.length||m){if("undefined"==typeof Adianti.formEventsCounter||Number.isNaN(Adianti.formEventsCounter))Adianti.formEventsCounter=0;if(0==Adianti.formEventsCounter)if(m.length)try{m[0].tmultifile.send_data(JSON.parse(c))}catch(v){m[0].tmultifile.setValue(c)}else if(f.length){if("thtmleditor"==
f.attr("widget"))f.summernote("code",c);else if("tcolor"==f.attr("widget"))c?f.data("picker").setColor(c):f.data("picker").setColor(null);else if("tarrowstep"==f.attr("widget"))c?tarrowstep_set_current(f[0].name,c):tarrowstep_clear(f[0].name);else if("tdate"==f.attr("widget"))tdate_set_value("#"+f.attr("id"),c);else if("bsignaturedrawcapture"==f.attr("widget"))bsignaturedrawcapture_set_value(f.attr("id"),c);else if("timagecropper"==f.attr("widget"))f[0].timagecropper.setValue(c);else if("tfile"==
f.attr("widget"))f[0].tfile.setValue(c);else if("tcombosearch"==f.attr("role")){if(f.val()!==c){var t=function(v){return/<[a-z][\s\S]*>/i.test(v.text)?$("<span>"+v.text+"</span>"):v.text};f.select2({templateResult:t,templateSelection:t}).val(c).trigger("change.select2");f.hasClass("tcombo_disabled")&&tmultisearch_disable_field(a,b)}}else if("tdbuniquesearch"==f.attr("widget")){var k=d;tdbuniquesearch_set_value(a,b,c,function(){k&&(f.attr("exitaction")&&tform_events_hang_exec(f.attr("exitaction")),
f.attr("changeaction")&&tform_events_hang_exec(f.attr("changeaction")))});d=!1}else if("multisearch"==f.attr("component"))c&&(t=function(v){return/<[a-z][\s\S]*>/i.test(v.text)?$("<span>"+v.text+"</span>"):v.text},f.select2({templateResult:t,templateSelection:t}).val(c).trigger("change.select2"));else if("radio"==f.attr("type")||"checkbox"==f.attr("type"))if(f.prop("checked",!1),c){var g=f.filter('[value="'+c+'"]').prop("checked",!0);"LABEL"==g.parent().prop("tagName")&&(g.parent().parent().find("label").removeClass("active"),
g.parent().toggleClass("active"))}else"LABEL"==f.parent().prop("tagName")&&f.parent().parent().find("label").removeClass("active");else f.val(c);d&&(f.attr("exitaction")&&tform_events_hang_exec(f.attr("exitaction")),f.attr("changeaction")&&tform_events_hang_exec(f.attr("changeaction")))}else{if(e.length){if("checkbox"==e.attr("type"))if(e.prop("checked",!1),c){e.parent().parent().find("label").removeClass("active");var l=JSON.parse(c);$.each(l,function(v,u){v=e.filter('[value="'+u+'"]').prop("checked",
!0);"LABEL"==v.parent().prop("tagName")&&v.parent().toggleClass("active")})}else e.parent().parent().find("label").removeClass("active");else if("multientry"==e.attr("component")){if(c){e.empty();var q=JSON.parse(c);$.each(q,function(v,u){e.append($("<option/>").val(u).text(u))});e.val(q).trigger("change.select2")}}else if("multisearch"==e.attr("component")&&"tuniquesearch"!==e.attr("widget")){if(c)if(q=JSON.parse(c),t=function(v){return/<[a-z][\s\S]*>/i.test(v.text)?$("<span>"+v.text+"</span>"):
v.text},"tmultisearch"==e.attr("widget"))e.select2({templateResult:t,templateSelection:t}).val(q).trigger("change.select2");else{if("tdbmultisearch"==e.attr("widget")){var w=d;tdbmultisearch_set_value(a,b,c,function(){w&&(e.attr("exitaction")&&tform_events_hang_exec(e.attr("exitaction")),e.attr("changeaction")&&tform_events_hang_exec(e.attr("changeaction")))})}else $.each(q,function(v,u){v=$($(e)[v]).attr("id");tform_send_data(a,"#"+v,u,d)});d=!1}}else e.length&&c&&(q=JSON.parse(c),$(e).find("option").prop("selected",
!1),"tselect"==e.attr("widget")&&1==e.length?$.each(q,function(v,u){$(e).find("option").filter('[value="'+u+'"]').prop("selected",!0)}):($.each(q,function(v,u){v=$($(e)[v]).attr("id");tform_send_data(a,"#"+v,u,d)}),d=!1));d&&(e.attr("exitaction")&&tform_events_hang_exec(e.attr("exitaction")),e.attr("changeaction")&&tform_events_hang_exec(e.attr("changeaction")))}}else tform_events_queue_push(function(){tform_send_data(a,b,c,d)})}}catch(v){console.log(v)}}
function tform_send_data_by_id(a,b,c,d,h){0<$("form[name="+a+"] [id="+b+"]").length&&tform_send_data(a,"#"+b,c,d,h)}function tform_events_hang_exec(a){if("undefined"==typeof Adianti.formEventsCounter||Number.isNaN(Adianti.formEventsCounter))Adianti.formEventsCounter=0;Adianti.formEventsCounter++;a=a.replace("'callback'","tform_decrease_events_counter");Function(a)()}function tform_events_stop(a){Adianti.formEventsStop=a}
function tform_events_queue_push(a){"undefined"==typeof Adianti.formEventsQueue&&(Adianti.formEventsQueue=[]);Adianti.formEventsQueue.push(a);setTimeout(tform_process_events_queue,100)}
function tform_process_events_queue(){if("undefined"==typeof Adianti.formEventsCounter||Number.isNaN(Adianti.formEventsCounter))Adianti.formEventsCounter=0;0==Adianti.formEventsCounter&&0<Adianti.formEventsQueue.length&&(next=Adianti.formEventsQueue.shift(),next());0<Adianti.formEventsQueue.length?setTimeout(tform_process_events_queue,100):"function"==typeof Adianti.formEventsStop&&(Adianti.formEventsStop(),Adianti.formEventsStop=null)}
function tform_decrease_events_counter(){if("undefined"==typeof Adianti.formEventsCounter||Number.isNaN(Adianti.formEventsCounter))Adianti.formEventsCounter=0;Adianti.formEventsCounter--}function tform_send_data_aggregate(a,b,c,d){try{""==$("form[name="+a+"] [name="+b+"]").val()?$("form[name="+a+"] [name="+b+"]").val(c):(current_value=$("form[name="+a+"] [name="+b+"]").val(),$("form[name="+a+"] [name="+b+"]").val(current_value+", "+c))}catch(h){console.log(h)}}
function tform_fire_field_actions(a,b){$("form[name="+a+"] [name="+b+"]").attr("exitaction")&&tform_events_hang_exec($("form[name="+a+"] [name="+b+"]").attr("exitaction"));$("form[name="+a+"] [name="+b+"]").attr("changeaction")&&tform_events_hang_exec($("form[name="+a+"] [name="+b+"]").attr("changeaction"))}function tform_hide_field(a,b,c){"undefined"==typeof c?$("#"+a+' [name="'+b+'"]').closest(".tformrow").hide("fast"):$("#"+a+' [name="'+b+'"]').closest(".tformrow").hide(c)}
function tform_show_field(a,b,c){"undefined"==typeof c?$("#"+a+' [name="'+b+'"]').closest(".tformrow").show("fast"):$("#"+a+' [name="'+b+'"]').closest(".tformrow").show(c)};function ttable_clone_previous_row(a){a=$(a).closest("table");var b=a.find("tbody tr:last").clone();tfieldlist_reset_fields(b,!0);a.find("tbody").append(b);ttable_reset_counter(a)}function ttable_clone_row(a){var b=$(a).closest("tr");a=$(a).closest("table");b.prev();var c=b.clone();tfieldlist_reset_fields(c,!1);b.after($(c));ttable_reset_counter(a)}
function ttable_reset_counter(a){var b=0;$(a).find("tr").each(function(c,d){c=$(d).find("input,select");$(d).data("row",b);0<c.length&&($.each(c,function(h,f){$(f).data("row",b)}),b++)})}function ttable_remove_row(a){setTimeout(function(){var b=$(a).closest("table"),c=b.find("tbody").find("tr:visible").length;tr=$(a).closest("tr");1==c&&(c=tr.clone(),tfieldlist_reset_fields(c,!0),tr.after($(c)));tr.remove();ttable_reset_counter(b)},10)}
function ttable_remove_row_by_id(a,b){$("#"+a).find("tr[id="+b+"]").remove()}function ttable_show_row(a,b){$("#"+a).find("tr#"+b).show()}function ttable_hide_row(a,b){$("#"+a).find("tr#"+b).hide()}function ttable_sortable_rows(a,b,c){$(document).ready(function(){$("#"+a+" tbody").sortable({handle:b,deactivate:c})})}function ttable_get_column_values(a,b){return $("#"+a+" tbody").find("tr").find("td:nth-child("+b+")").map(function(){return this.innerText}).get().join(",")}
function ttable_add_row(a,b,c){$("#"+a+" tbody").append(base64_decode(c))}function ttable_replace_row_by_id(a,b,c){0<$("#"+a+" tbody").find("#"+b).length?$("#"+a+" tbody").find("#"+b).replaceWith(base64_decode(c)):$("#"+a+" tbody").append(base64_decode(c))};function tfieldlist_reset_fields(a,b){var c=parseInt(1E8*Math.random());$(a).attr("id",c);var d=$(a).find("input,select"),h=[];$.each(d,function(f,e){f=$(e).attr("id");var m=$(e).attr("widget"),t=$(e).attr("role");if("undefined"!==typeof f){var k=f.split("_");k.pop();var g=k.join("_"),l=g+"_"+c;k=$(e).parent();0<=h.indexOf(l)&&(l=g+parseInt(100*Math.random())+"_"+c);h.push(l);if("tdate"==m||"ttime"==m||"tdatetime"==m){$(e).attr("id",l);b&&$(e).val("");"undefined"!==typeof $(e).attr("exitaction")&&
$(e).attr("exitaction",$(e).attr("exitaction").replace(f,l));"undefined"!==typeof $(e).attr("onblur")&&$(e).attr("onblur",$(e).attr("onblur").replace(f,l));"undefined"!==typeof $(e).attr("changection")&&$(e).attr("changection",$(e).attr("changection").replace(f,l));"undefined"!==typeof $(e).attr("onchange")&&$(e).attr("onchange",$(e).attr("onchange").replace(f,l));grandparent=$(k).parent();e=$(e).detach();$(k).remove();grandparent.append(e);t=m;"ttime"==m&&(t="tdatetime");var q=new RegExp(f,"g");
tfieldlist_execute_scripts(grandparent,t,function(u){return u=u.replace(q,l)})}else if("tentry"==m)k=$(e).closest("td"),$(e).attr("id",l),b&&($(e).attr("name").match("/__row__id/")||$(e).val("")),"undefined"!==typeof $(e).attr("exitaction")&&$(e).attr("exitaction",$(e).attr("exitaction").replace(f,l)),"undefined"!==typeof $(e).attr("onblur")&&$(e).attr("onblur",$(e).attr("onblur").replace(f,l)),q=new RegExp(f,"g"),tfieldlist_execute_scripts(k,"tentry",function(u){return u=u.replace(q,l)});else if("tspinner"==
m)$(e).attr("id",l),b&&$(e).val(""),"undefined"!==typeof $(e).attr("exitaction")&&$(e).attr("exitaction",$(e).attr("exitaction").replace(f,l)),"undefined"!==typeof $(e).attr("onblur")&&$(e).attr("onblur",$(e).attr("onblur").replace(f,l)),grandparent=$(k).parent(),e=$(e).detach(),$(k).remove(),grandparent.append(e),q=new RegExp(f,"g"),tfieldlist_execute_scripts(grandparent,"tspinner",function(u){return u=u.replace(q,l)});else if("tcolor"==m)$(e).attr("id",l),b&&$(e).val(""),"undefined"!==typeof $(e).attr("exitaction")&&
$(e).attr("exitaction",$(e).attr("exitaction").replace(f,l)),"undefined"!==typeof $(e).attr("onblur")&&$(e).attr("onblur",$(e).attr("onblur").replace(f,l)),grandparent=$(k).parent(),grandparent.find(".pickr").replaceWith('<span class="input-group-addon tcolor"><i class="tcolor-icon"></i></span>'),q=new RegExp(f,"g"),tfieldlist_execute_scripts(grandparent,"tcolor",function(u){return u=u.replace(q,l)});else if("thidden"==m)$(e).attr("id",l),"true"==$(e).attr("uniqid")?$(e).val(parseInt(1E10*Math.random())):
b&&$(e).val(""),q=new RegExp(f,"g"),tfieldlist_execute_scripts(k,"thidden",function(u){return u=u.replace(q,l)});else if("tdbmultisearch"==m||"tdbuniquesearch"==m)$(e).attr("id",l),$(e).removeData("select2-id").removeAttr("data-select2-id").find("option").removeAttr("data-select2-id"),$(a).removeData("select2-id").removeAttr("data-select2-id"),$(k).find(".select2-container").remove(),q=new RegExp(f,"g"),tfieldlist_execute_scripts(k,"tdbmultisearch",function(u){return u=u.replace(q,l)}),b&&setTimeout(function(){$(e).val("").trigger("change.select2")},
10);else if("tmultisearch"==m||"tuniquesearch"==m)$(e).attr("id",l),$(e).removeData("select2-id").removeAttr("data-select2-id").find("option").removeAttr("data-select2-id"),$(a).removeData("select2-id").removeAttr("data-select2-id"),$(k).find(".select2-container").remove(),q=new RegExp(f,"g"),tfieldlist_execute_scripts(k,"tmultisearch",function(u){return u=u.replace(q,l)}),b&&setTimeout(function(){$(e).val("").trigger("change.select2")},10);else if("tcombo"==m)$(e).attr("id",l),b&&$(e).val(""),"tcombosearch"==
t&&($(e).removeData("select2-id").removeAttr("data-select2-id").find("optgroup").removeAttr("data-select2-id"),$(e).removeData("select2-id").removeAttr("data-select2-id").find("option").removeAttr("data-select2-id"),$(e).removeData("select2-id").removeAttr("data-select2-id").find("optgroup").find("option").removeAttr("data-select2-id"),$(a).removeData("select2-id").removeAttr("data-select2-id"),$(k).find(".select2-container").remove()),"undefined"!==typeof $(e).attr("changeaction")&&$(e).attr("changeaction",
$(e).attr("changeaction").replace(f,l)),"undefined"!==typeof $(e).attr("onchange")&&$(e).attr("onchange",$(e).attr("onchange").replace(f,l)),q=new RegExp(f,"g"),tfieldlist_execute_scripts(k,"tcombo",function(u){return u=u.replace(q,l)});else if("tfile"==m){$(e).attr("id",l);b&&$(e).val("");k=$(e).closest("td");t=k.find(".div_file").attr("id");var w="div_file_"+c;k.find(".tfile_row_wrapper").remove();k.find(".file-response-icon").remove();k.find(".div_file").attr("id",w);$(e).css("padding-left","5px");
"undefined"!==typeof $(e).attr("changeaction")&&$(e).attr("changeaction",$(e).attr("changeaction").replace(f,l));"undefined"!==typeof $(e).attr("onchange")&&$(e).attr("onchange",$(e).attr("onchange").replace(f,l));q=new RegExp(f,"g");var v=new RegExp(t,"g");tfieldlist_execute_scripts(k,"tfile",function(u){u=u.replace(q,l);return u=u.replace(v,w)})}}"tradiobutton"==m?$(e).parent().removeClass("active"):"tcheckbutton"==m&&$(e).parent().removeClass("active")});$(a).find("[name$='__row__id[]']").val(c)}
function tfieldlist_execute_scripts(a,b,c){a=$(a).find("script");$.each(a,function(d,h){d=$(h).text();d=c(d);d.trim().split("_")[0]==b&&$(h).replaceWith("<script>"+d+"\x3c/script>")})}
function tfieldlist_clear(a){ttable_clone_previous_row($("[name="+a+"] tbody"));var b=$("[name="+a+"] tbody").find("tr").length-1;$("[name="+a+"] tbody").find("tr").each(function(c,d){c<b&&ttable_remove_row(d)});$("[name="+a+"] tfoot").find('input[type="text"]').each(function(c,d){tfieldlist_update_sum(a,$(d).attr("field_name"))})}function tfieldlist_add_rows(a,b,c){c=c?c:50;for(n=1;n<=b;n++)setTimeout(function(){ttable_clone_previous_row($("[name="+a+"] tbody"))},c*n)}
function tfieldlist_clear_rows(a,b,c){var d=$("[name="+a+"] tbody").find("tr").length;c=(0==c?d:c)+b;c>=d&&(ttable_clone_previous_row($("[name="+a+"] tbody").find("tr:last")),c=d);$("[name="+a+"] tbody").find("tr").each(function(h,f){h>=b&&h<c&&$(f).remove()})}
function tfieldlist_get_last_row_data(a){var b={};b.index=$(a).closest("table").find("tbody tr:last").index();$(a).closest("table").find("tbody tr:last").find("[name]").each(function(c,d){c=$(d).attr("name");c=c.replace("[]","");b[c]=$(d).val()});return b}function tfieldlist_get_row_data(a){var b={};b.index=$(a).closest("tr").index();b._row_id=$(a).closest("tr").attr("id");$(a).closest("tr").find("[name]").each(function(c,d){c=$(d).attr("name");c=c.replace("[]","");b[c]=$(d).val()});return b}
function tfieldlist_column_sum(a){var b=0;$('[name="'+a+'[]"]').each(function(c,d){c=tentry_get_data_by_id($(d).attr("id"));isNaN(parseFloat(c))||(b+=parseFloat(c))});return b}
function tfieldlist_update_sum(a,b,c){setTimeout(function(){var d=tfieldlist_column_sum(b),h=$("[name^="+b+"]:first").data("nmask"),f=[];h&&(f=h.split(""));$("[name=grandtotal_"+b+"]").val(number_format(d,f[0]??2,f[1]??",",f[2]??"."));c&&"function"===typeof c&&c();d=$("table[name="+a+"]").attr("total-update-action");if("undefined"!==typeof d&&0<d.length){if(f=$("table[name="+a+"]").closest("form")){var e={};h={};f=$(f).serializeArray();$(f).each(function(m,t){m=t.name;m=m.replace("[]","");void 0===
e[m]&&(e[m]=[]);e[m].push(t.value)});for(prop in e)if(1<=e[prop].length)for(f=0;f<e[prop].length;f++)"undefined"==typeof h[f]&&(h[f]={}),h[f][prop]=e[prop][f];e.list_data=h}__adianti_post_exec(d,e,null,"1",!0)}},50)}function tfieldlist_enable_field(a){try{0<$('table.tfieldlist[name="'+a+'"]').length&&$('table.tfieldlist[name="'+a+'"]').parent().find(".tfieldlist-disable").remove()}catch(b){console.log(b)}}
function tfieldlist_disable_field(a){try{0<$('table.tfieldlist[name="'+a+'"]').length&&$('table.tfieldlist[name="'+a+'"]').parent().prepend('<div class="tfieldlist-disable"></div>')}catch(b){console.log(b)}};function tdatagrid_inlineedit(a){$(function(){$(".inlineediting").editInPlace({callback:function(b,c){__adianti_load_page($(this).attr("action")+a+"&key="+$(this).attr("key")+"&"+$(this).attr("pkey")+"="+$(this).attr("key")+"&field="+$(this).attr("field")+"&value="+encodeURIComponent(c));return c},show_buttons:!1,text_size:20,params:column=name})})}function tdatagrid_add_serialized_row(a,b){$("#"+a+" > tbody:last-child").append(b)}
function tdatagrid_enable_groups(){$("[id^=tdatagrid_] tr[level]").not("[x=1]").css("cursor","pointer").attr("x","1").click(function(){$(this).data("child-visible")||$(this).data("child-visible",!1);$(this).data("child-visible",!$(this).data("child-visible"));$(this).data("child-visible")?$(this).siblings('[childof="'+$(this).attr("level")+'"]').hide("fast"):$(this).siblings('[childof="'+$(this).attr("level")+'"]').show("fast")})}
function tdatagrid_update_total(a){var b=a.substring(1),c=document.querySelector(a);(new MutationObserver(function(d){d.forEach(function(h){"TBODY"==h.target.tagName&&$(a).find("[data-total-function=sum]").each(function(f,e){var m=0;f=$(e).data("column-name");var t=$(e).data("total-mask"),k=t.split(":");if(0<k.length){var g=k[0];t=k[1]}else g="",t=t.substring(1);$('[name="'+b+"_"+f+'[]"]').each(function(l,q){m+=parseFloat($(q).val())});$(e).html(g+" "+number_format(m,t.substring(0,1),t.substring(1,
2),t.substring(2,3)));$(e).data("value",m);$(e).attr("data-value",m)})})})).observe(c,{attributes:!0,childList:!0,characterData:!0,subtree:!0,attributeOldValue:!0,characterDataOldValue:!0})}
function tdatagrid_mutation_action(a,b){var c=a.substring(1),d=document.querySelector(a);(new MutationObserver(function(h){h.forEach(function(f){var e={},m={};if("TBODY"==f.target.tagName){$(a).find("[data-hidden-field=true]").each(function(k,g){k=$(g).attr("name").replace(c+"_","");k=k.replace("[]","");"="!==k.substring(0,1)&&("undefined"==typeof e[k]&&(e[k]=[]),e[k].push($(g).val()))});for(prop in e)for(f=0;f<e[prop].length;f++)"undefined"==typeof m[f]&&(m[f]={}),m[f][prop]=e[prop][f];var t={};
if(f=$(a).closest("form"))f=$(f).serializeArray(),$(f).each(function(k,g){k=g.name.replace("[]","");t[k]=g.value});t.list_data=m;__adianti_post_exec(b,t,null,"1",!0)}})})).observe(d,{attributes:!0,childList:!0,characterData:!0,subtree:!0,attributeOldValue:!0,characterDataOldValue:!0})};function tbutton_enable_field(a,b){setTimeout(function(){$("button[name="+b+"]").removeAttr("disabled");$("button[name=btn_"+b+"]").removeAttr("disabled");$("#tbutton_"+b).removeAttr("disabled")},1)}function tbutton_disable_field(a,b){setTimeout(function(){$("button[name="+b+"]").attr("disabled",!0);$("button[name=btn_"+b+"]").attr("disabled",!0);$("#tbutton_"+b).attr("disabled",!0)},1)};function tcheckgroup_enable_field(a,b){setTimeout(function(){$("form[name="+a+"] [checkgroup="+b+"]").attr("onclick",null);$("form[name="+a+"] [checkgroup="+b+"]").css("pointer-events","auto");$("form[name="+a+"] [checkgroup="+b+"]").closest(".toggle-wrapper").removeClass("tfield_block_events")},1)}
function tcheckgroup_disable_field(a,b){setTimeout(function(){$("form[name="+a+"] [checkgroup="+b+"]").attr("onclick","return false");$("form[name="+a+"] [checkgroup="+b+"]").css("pointer-events","none");$("form[name="+a+"] [checkgroup="+b+"]").closest(".toggle-wrapper").addClass("tfield_block_events")},1)}function tcheckgroup_clear_field(a,b){setTimeout(function(){$("form[name="+a+"] [checkgroup="+b+"]").prop("checked",!1)},1)}
function tcheckgroup_reload(a,b,c){$("form[name="+a+"] [tcheckgroup="+b+"]").replaceWith(c)};function tcolor_enable_field(a,b){try{setTimeout(function(){$("form[name="+a+"] [name="+b+"]").trigger("enable");$("form[name="+a+"] [name="+b+"]").removeClass("tfield_disabled")},1)}catch(c){console.log(c)}}function tcolor_disable_field(a,b){try{setTimeout(function(){$("form[name="+a+"] [name="+b+"]").trigger("disable");$("form[name="+a+"] [name="+b+"]").addClass("tfield_disabled")},1)}catch(c){console.log(c)}}
function tcolor_start(a,b,c,d,h){var f={pt:{clear:"Limpar",save:"Salvar"},es:{clear:"Limpiar",save:"Guardar"},en:{clear:"Clear",save:"Save"}},e=$(`#${a}`);e.css("width",`calc( ${b} - 30px )`);h.el=`#${a}+.tcolor`;h.theme=c;h.default=e.val()?e.val():null;h.i18n={"btn:clear":f[Adianti.language].clear,"btn:save":f[Adianti.language].save};var m=Pickr.create(h);$(`#${a}`).on("focusin",function(){m.show()});$(`#${a}`).data("picker",m);e.on("disable",function(){m.disable()});e.on("enable",function(){m.enable()});
m.on("save",function(t,k){const g=e.val();t=t?.toHEXA().toString();e.val(t);k.hide();g!=t&&"undefined"!=typeof d&&d(t)});m.on("swatchselect",function(t,k){k.applyColor()});e.on("change",function(){var t=-1==this.value.indexOf("#")?"#":"";this.value?m.setColor(t+this.value,!1):m.setColor(null)})};function ticon_enable_field(a,b){try{setTimeout(function(){$("form[name="+a+'] div[name="block_'+b+'"]').remove()},1)}catch(c){console.log(c)}}
function ticon_disable_field(a,b){try{input=$("form[name="+a+"] [name="+b+"]").closest(".input-group"),setTimeout(function(){$("form[name="+a+'] div[name="block_'+b+'"]').remove()},19),setTimeout(function(){input.prepend('<div name="block_'+b+'" style="position:absolute; width:'+input.width()+"px; height:"+input.height()+'px; background: #c0c0c0; opacity:0.5;"></div>')},20)}catch(c){console.log(c)}}
function ticon_start(a,b){if(b)$("#"+a).iconpicker().on("iconpickerUpdated",function(c){b($(this).val())});else $("#"+a).iconpicker()};function tcombo_enable_field(a,b){form_name_sel="undefined"!=typeof a&&""!=a?'form[name="'+a+'"] ':"";var c='[name="'+b+'"]';-1==b.indexOf("[")&&0<$("#"+b).length&&(c="#"+b);try{"tcombosearch"==$(form_name_sel+c).attr("role")?tmultisearch_enable_field(a,b):($(form_name_sel+c).attr("onclick",null),$(form_name_sel+c).css("pointer-events","auto"),$(form_name_sel+c).removeClass("tcombo_disabled"))}catch(d){console.log(d)}}
function tcombo_disable_field(a,b){form_name_sel="undefined"!=typeof a&&""!=a?'form[name="'+a+'"] ':"";var c='[name="'+b+'"]';-1==b.indexOf("[")&&0<$("#"+b).length&&(c="#"+b);try{"tcombosearch"==$(form_name_sel+c).attr("role")?tmultisearch_disable_field(a,b):($(form_name_sel+c).attr("onclick","return false"),$(form_name_sel+c).attr("tabindex","-1"),$(form_name_sel+c).css("pointer-events","none"),$(form_name_sel+c).addClass("tcombo_disabled"))}catch(d){console.log(d)}}
function tcombo_add_option(a,b,c,d){c=c.replace(/"/g,"");a="undefined"!=typeof a&&""!=a?'form[name="'+a+'"] ':"";var h='select[name="'+b+'"]';-1==b.indexOf("[")&&0<$("#"+b).length&&(h="#"+b);b=$(a+h).find("optgroup");0<b.length?$('<option value="'+c+'">'+d+"</option>").appendTo(b.last()):$('<option value="'+c+'">'+d+"</option>").appendTo(a+h)}
function tcombo_create_opt_group(a,b,c){a="undefined"!=typeof a&&""!=a?'form[name="'+a+'"] ':"";var d='[name="'+b+'"]';-1==b.indexOf("[")&&0<$("#"+b).length&&(d="#"+b);$('<optgroup label="'+c+'"></optgroup>').appendTo(a+d)}
function tcombo_clear(a,b,c){"undefined"==typeof c&&(c=!0);a="undefined"!=typeof a&&""!=a?'form[name="'+a+'"] ':"";var d='[name="'+b+'"]';-1==b.indexOf("[")&&0<$("#"+b).length&&(d="#"+b);b=$(a+d);"tcombosearch"==b.attr("role")?0<b.find("option:not(:disabled)").length&&b.val("").empty().trigger("change.select2"):(b.val(!1),b.html(""));c&&b.attr("changeaction")&&tform_events_hang_exec(b.attr("changeaction"))}
function tcombo_enable_search(a,b){$(a).removeAttr("onchange");$(a).select2({allowClear:!0,placeholder:b,templateResult:function(c){return/<[a-z][\s\S]*>/i.test(c.text)?$("<span>"+c.text+"</span>"):c.text},templateSelection:function(c){return/<[a-z][\s\S]*>/i.test(c.text)?$("<span>"+c.text+"</span>"):c.text}}).on("change",function(c){(new Function($(a).attr("changeaction")))()})};function tdate_enable_field(a,b){try{$('form[name="'+a+'"] [name="'+b+'"]').removeClass("tfield_disabled"),$('form[name="'+a+'"] [name="'+b+'"]').css("pointer-events","auto"),$('form[name="'+a+'"] [name="'+b+'"]').removeAttr("tabindex"),$('form[name="'+a+'"] [name="'+b+'"]').attr("readonly",!1)}catch(c){console.log(c)}setTimeout(function(){$('form[name="'+a+'"] [name="'+b+'"]').next().show()},1)}
function tdate_disable_field(a,b){try{$('form[name="'+a+'"] [name="'+b+'"]').addClass("tfield_disabled"),$('form[name="'+a+'"] [name="'+b+'"]').css("pointer-events","none"),$('form[name="'+a+'"] [name="'+b+'"]').attr("tabindex","-1"),$('form[name="'+a+'"] [name="'+b+'"]').attr("readonly",!0)}catch(c){console.log(c)}setTimeout(function(){$('form[name="'+a+'"] [name="'+b+'"]').next().hide()},1)}function tdate_set_value(a,b){$(a).val(b);$(a).closest(".tdate-group").datepicker("update")}
function tdate_start(a,b,c,d,h){$(a).wrap('<div class="tdate-group date">');$(a).after('<span class="btn btn-default tdate-group-addon"><i class="far fa-calendar"></i></span>');h=Object.assign({format:b,todayBtn:"linked",language:c,calendarWeeks:!1,autoclose:!0,todayHighlight:!0,orientation:"bottom auto"},JSON.parse(h));$(a).closest(".tdate-group").datepicker(h).on("changeDate",function(f){$(a).attr("exitaction")&&(new Function($(a).attr("exitaction")))()}).on("show",function(){$(".datepicker").on("click",
function(f){f.stopPropagation()})});"undefined"!==d&&$(a).closest(".tdate-group").width(d)};function tdatetime_start(a,b,c,d,h){$(a).wrap('<div class="tdate-group tdatetimepicker input-append date">');$(a).after('<span class="add-on btn btn-default tdate-group-addon"><i class="far fa-clock icon-th"></i></span>');atributes={autoclose:!0,todayBtn:!0,todayHighlight:!0,format:b,language:c};h=Object.assign(atributes,JSON.parse(h));$(a).closest(".tdate-group").datetimepicker(h).on("change.dp",function(f){$(a).attr("exitaction")&&(new Function($(a).attr("exitaction")))()}).on("show",function(){$(".datepicker").on("click",
function(f){f.stopPropagation()})});"undefined"!==d&&$(a).closest(".tdate-group").width(d)};function tdbentry_start(a,b,c){$('input[name="'+a+'"]').autocomplete({serviceUrl:b,minChars:c})};/*
  Copyright (c) 2006 Adianti Solutions Ltd. (http://www.adianti.com.br)
 @license    http://www.adianti.com.br/framework-license
 @enterprise  WebSeller Sistemas Integrados
 @author  Wellington Camargo Serra
 @author  Tiago Fernando Shirmer
 @author  Cristian Tales

 @param field = Name do campo a ser aplicado a mascara.
 @param event = Evento de disparo js
 @param mask  = Mascara a ser aplicada
*/
function tentry_new_mask(a,b){$(document).ready(function(){b=b.replace(/9/g,"0");var c=0<$("#"+a).attr("maxlength")?$("#"+a).attr("maxlength"):250;"A!"==b?b="A".repeat(c):"S!"==b?b="S".repeat(c):"0!"==b&&(b="0".repeat(c));$("#"+a).mask(b)})}
function tentry_mask(a,b,c){var d=a.value;if("undefined"==typeof d)return!0;"1"==$(a).attr("forceupper")&&(d=d.toUpperCase());"1"==$(a).attr("forcelower")&&(d=d.toLowerCase());keyCode=document.all?b.keyCode:b.which;if(8==keyCode||9==b.keyCode||13==b.keyCode)return!0;var h="";var f=0;var e="!"==c.charAt(1)?a.value.length+1:c.length;for(b=0;b<e-1;b++)maskChar=c.charAt(b),valueChar=d.charAt(f),b<=d.length&&(("-"==maskChar||"_"==maskChar||"."==maskChar||"/"==maskChar||"\\"==maskChar||":"==maskChar||"|"==
maskChar||"("==maskChar||")"==maskChar||"["==maskChar||"]"==maskChar||"{"==maskChar||"}"==maskChar)&maskChar!==valueChar?h+=maskChar:(h+=valueChar,f++));a.value=h;a=a.value.length;maskChar="!"==c.charAt(1)?c.charAt(0):c.charAt(a);switch(maskChar){case "A":case "a":return 47<keyCode&&58>keyCode||64<keyCode&&91>keyCode||96<keyCode&&123>keyCode;case "S":case "s":return 64<keyCode&&91>keyCode||96<keyCode&&123>keyCode;case "9":return 47<keyCode&&58>keyCode}return!0}
function tentry_upper(a){if("undefined"!==typeof a.value){const b=a.selectionStart,c=a.selectionEnd;a.value=a.value.toUpperCase();a.setSelectionRange(b,c)}}function tentry_lower(a){if("undefined"!==typeof a.value){const b=a.selectionStart,c=a.selectionEnd;a.value=a.value.toLowerCase();a.setSelectionRange(b,c)}}
function tentry_autocomplete(a,b,c){var d='input[name="'+a+'"]';0<$("#"+a).length&&(d="#"+a);c=Object.assign({lookup:b,onSelect:function(){var h=$(this).data("val"),f=$(this).val();$(this).data("val",f);$(d).removeAttr("onblur");h!==f&&$(d).attr("exitaction")&&(string_callback=$(d).attr("exitaction"),Function(string_callback)())}},JSON.parse(c));$(d).autocomplete(c)}function tentry_autocomplete_by_name(a,b,c){objectId=$("[name="+a+"]").attr("id");tentry_autocomplete(objectId,b,c)}
function tentry_numeric_mask(a,b,c,d,h,f){var e='input[name="'+a+'"]';0<$("#"+a).length&&(e="#"+a);$(e).maskMoney({prefix:"",suffix:"",affixesStay:!0,thousands:d,decimal:c,precision:b,allowZero:!0,allowNegative:f,formatOnBlur:h,reverse:h,bringCaretAtEndOnFocus:!h,selectAllOnFocus:!1,allowEmpty:!0})}
function tentry_get_data_by_id(a){var b=$("#"+a).data("nmask");if("undefined"!==typeof b){var c=b.substring(1,2);b=b.substring(2,3);a=$("#"+a).val();a=a.split(b).join("");return a=a.split(c).join(".")}return $("#"+a).val()}function tentry_exit_on_enter(a){$("#"+a).bind("keypress",function(b){13==b.keyCode&&document.getElementById(a).blur()})}
function tentry_change_mask(a,b,c){form_name_sel="undefined"!=typeof a&&""!=a?'form[name="'+a+'"] ':"";var d='[name="'+b+'"]';-1==b.indexOf("[")&&0<$("#"+b).length&&(d="#"+b);$(document).ready(function(){c=c.replace(/9/g,"0");var h=0<$(d).attr("maxlength")?$(d).attr("maxlength"):250;"A!"==c?c="A".repeat(h):"S!"==c?c="S".repeat(h):"0!"==c&&(c="0".repeat(h));$(d).mask(c)})}
function tentry_toggle_visibility(a){$("#"+a+"-container").find("i").click(function(){var b=$(this),c=$(this).closest("div").find("input");b.toggleClass("fa-eye-slash");b.toggleClass("fa-eye");"text"==c.attr("type")?c.attr("type","password"):c.attr("type","text")})};function texpander_start(){$(".texpander-container").click(function(a){a.stopPropagation()})};function tfield_enable_field(a,b){try{$("form[name="+a+"] [name="+b+"]").attr("readonly",!1),$("form[name="+a+"] [name="+b+"]").removeClass("tfield_disabled")}catch(c){console.log(c)}}function tfield_disable_field(a,b){try{$("form[name="+a+"] [name="+b+"]").attr("readonly",!0),$("form[name="+a+"] [name="+b+"]").addClass("tfield_disabled")}catch(c){console.log(c)}}function tfield_clear_field(a,b){try{$("form[name="+a+"] [name="+b+"]").val("")}catch(c){console.log(c)}}
function tfield_transfer_value(a,b,c){if("checkbox"==$(a).attr("type")){var d=$(a).attr("value"),h=$(a).closest(c).find(b).val();h=$(a).is(":checked")?h+d+",":h.replace(d+",","")}else h=$(a).val();$(a).closest(c).find(b).val(h)};function ttreeview_start(a,b){$(a).treeview({persist:"location",animated:"fast",collapsed:b})};function FileUploader(a,b,c,d,h,f,e,m,t){this.field_name=$("#"+a).attr("receiver");this.input_id=a;this.limitSize=t;this.service_action=c;this.parent_container=$("#"+b);this.complete_action=d;this.error_action=h;this.file_handling=f;this.image_gallery=JSON.parse(e);this.popover=JSON.parse(m);this.obj_file=document.getElementById(this.input_id);var k=this;this.createStatusRow=function(){var g=k.parent_container.find("[widget=tfile]")[0],l=$(g).css("width"),q=$("<div />",{"class":"tfile_row_wrapper",
style:"display:none"});g=$("<div />",{"class":"tfile_row_1"});var w=$("<div />",{"class":"tfile_row_2"});l=$("<div />",{"class":"tfile_link_wrapper",style:"width: calc("+l+" - 25px)"});var v=$("<span />",{"class":"tfile_del_icon fa fa-minus-circle gray",title:"Remover"}),u=$("<div />",{"class":"progress-bar progress-bar-success",style:"width: 0%; height: 2px;"}),D=$("<input />",{type:"hidden",name:k.field_name,widget:"tfile"});"1"==k.image_gallery.enabled&&($(l).css("width","unset"),$(q).css("border",
"1px solid gray"),$(q).css("border-radius","3px"),$(q).css("margin","2px"));k.file_row_wrapper=q;k.file_input_hidden=D;k.file_progress_bar=u;k.file_link_wrapper=l;k.parent_container.children(".tfile_row_wrapper").remove();k.parent_container.append(q);q.append(g);q.append(w);g.append(D,l,v);w.append(u);$(v).click(function(){var A=k.getData();q.hide();k.parent_container.children("i").attr({"class":"",title:""});k.parent_container.find("[widget=tfile]").css("padding-left","5px");A.delFile=A.fileName;
A.delFile==A.newFile&&(A="");k.setData(A)});return q};this.clear=function(){k.file_row_wrapper&&k.file_row_wrapper.hide();k.parent_container.children("i").attr({"class":"",title:""});k.parent_container.find("[widget=tfile]").css("padding-left","5px");$(k.file_input_hidden).val("");$("#"+this.input_id).val("")};this.showFile=function(g){"undefined"==typeof g&&(g=this.getData());if(g=g.fileName){var l=k.file_row_wrapper,q=l.find(".tfile_link_wrapper");l.find(".progress-bar").css("width","100%");if(-1<
$.inArray(g.split(".").pop().toLowerCase(),"png jpg jpeg gif svg webp ico fav".split(" "))){l='<img style="max-width:460px" src="download.php?file={file_name}">';k.popover.content&&(l=atob(k.popover.content));l=l.replace("{file_name}",g);if("1"==k.image_gallery.enabled){var w=$("<a />",{href:"download.php?file="+g,target:"_blank"}),v=$("<img />",{src:"download.php?file="+g}).height(k.image_gallery.height).width(k.image_gallery.width);w.append(v)}else w=$("<a />",{href:"download.php?file="+g,target:"_blank"});
"1"==k.popover.enabled&&w.popover({trigger:"hover",content:l,html:!0,container:"body",template:'<div class="popover" role="tooltip" style="z-index:100000;max-width:800px"><div class="arrow"></div><h3 class="popover-title popover-header"></h3><div class="popover-content popover-body"><div class="data-content"></div></div></div>',title:k.popover.title||""})}else w=$("<a />",{href:"download.php?file="+g,target:"_blank"});k.file_row_wrapper.show();"1"!=k.image_gallery.enabled&&w.append(g);q.html(w)}};
this.getData=function(){var g=decodeURIComponent(k.file_input_hidden.val()),l="";try{l=g?JSON.parse(g):{}}catch(q){l={}}return l};this.setData=function(g){k.clear();g&&$(k.file_input_hidden).val(encodeURIComponent(JSON.stringify(g)))};this.supportAjaxUploadWithProgress=function(){return this.supportFileAPI()&&this.supportAjaxUploadProgressEvents()&&this.supportFormData()};this.supportFileAPI=function(){var g=document.createElement("INPUT");g.type="file";return"files"in g};this.supportAjaxUploadProgressEvents=
function(){var g=new XMLHttpRequest;return!!(g&&"upload"in g&&"onprogress"in g.upload)};this.supportFormData=function(){return!!window.FormData};this.initFileUpload=function(){var g=new FormData,l=k.obj_file.files[0];g.append("fileName",l);if(k.limitSize&&l.size>k.limitSize)throw k.onLoadStart(),Error(_t("large_file")+k.limitSize/1024/1024+"MBs");this.supportAjaxUploadWithProgress()&&this.sendXHRequest(g,k.service_action)};this.sendXHRequest=function(g,l){var q=new XMLHttpRequest;q.upload.addEventListener("loadstart",
this.onLoadStart,!1);q.upload.addEventListener("progress",this.onProgress,!1);q.upload.addEventListener("load",this.onLoad,!1);q.addEventListener("readystatechange",this.onReadyStateChange,!1);q.open("POST",l,!0);q.send(g)};this.onLoadStart=function(g){0==k.parent_container.children("i").length&&k.parent_container.prepend($("<i>"));k.file_handling&&k.file_row_wrapper.show();k.parent_container.find("[widget=tfile]").css("padding-left","20px");k.parent_container.children("i").attr({"class":"fa fa-spinner fa-spin fa-fw blue file-response-icon",
title:"..."})};this.onLoad=function(g){};this.onProgress=function(g){g.lengthComputable&&k.file_handling&&(g=Math.round(100*g.loaded/g.total),k.file_progress_bar.css("width",g+"%").css("height",2),k.file_link_wrapper.html(g+"%"))};this.onReadyStateChange=function(g){var l=null;try{l=g.target.status}catch(u){return}if("200"==l&&"4"==g.target.readyState&&g.target.responseText)try{var q=JSON.parse(g.target.responseText);if("success"==q.type){if(k.file_handling){var w=k.getData();w.fileName&&(w.delFile=
w.fileName);w.newFile="tmp/"+q.fileName;w.fileName="tmp/"+q.fileName;k.setData(w);k.showFile(w)}else{var v=$("#"+k.input_id).parent().children("input[type=hidden]");$(v).val(q.fileName)}k.showMessage("success",_t("success"));4==this.readyState&&"function"==typeof k.complete_action&&k.complete_action()}else k.file_handling&&k.file_row_wrapper.remove(),"function"==typeof k.error_action&&k.error_action(),k.showMessage("error",q.msg)}catch(u){"function"==typeof k.error_action&&k.error_action(),k.file_handling&&
k.file_row_wrapper.remove(),"undefined"==typeof q?k.showMessage("error",g.target.responseText):k.showMessage("error",u)}};this.showMessage=function(g,l){k.parent_container.children("i").removeAttr("data-original-title");"success"==g?(k.parent_container.find("[widget=tfile]").css("padding-left","20px"),k.parent_container.children("i").attr({"class":"far fa-check-circle green file-response-icon","data-original-title":l})):"error"==g&&(k.parent_container.find("[widget=tfile]").css("padding-left","20px"),
k.parent_container.children("i").attr({"class":"fa fa-exclamation-circle red file-response-icon","data-original-title":l}))};this.setValue=function(g){this.clear();if(g){var l={fileName:g};0<=g.indexOf("%7B%")&&(l=JSON.parse(decodeURIComponent(g)));this.setData(l)}this.showFile()}}
function tfile_start(a,b,c,d,h,f,e,m,t){$(function(){var k=new FileUploader(a,b,c,d,h,f,e,m,t);$("#"+a).change(function(){try{k.initFileUpload()}catch(l){k.clear(),k.showMessage("error",l.message),"function"==typeof this.error_action&&k.error_action()}});if(f){var g=$("#"+a).parent().children("input[type=hidden]");k.createStatusRow();$(g).val()&&k.setData(JSON.parse(decodeURIComponent($(g).val())));k.showFile();$(g).remove()}$('[name="'+k.field_name+'"]')[0].tfile=k})}
function tfile_send_data(a,b){b&&(b={fileName:b},a=$("#"+a).data("instance"),"undefined"!=typeof a&&(a.setData(b),a.showFile()))}function tfile_enable_field(a,b){try{$("form[name="+a+"] [name=file_"+b+"]").removeAttr("disabled"),$("form[name="+a+"] [name=file_"+b+"]").removeClass("tfield_disabled").addClass("tfield")}catch(c){console.log(c)}}
function tfile_disable_field(a,b){try{$("form[name="+a+"] [name=file_"+b+"]").attr("disabled",!0),$("form[name="+a+"] [name=file_"+b+"]").removeClass("tfield").addClass("tfield_disabled")}catch(c){console.log(c)}}function tfile_clear_field(a,b){try{$("form[name="+a+"] [name="+b+"]").val(""),$("form[name="+a+"] [name=file_"+b+"]").val("")}catch(c){console.log(c)}}
function tfile_update_download_link(a){$("#view_"+a).length&&(value=$("[name="+a+"]").val(),$("#view_"+a).attr("href","download.php?file=tmp/"+value),$("#view_"+a).html("tmp/"+value))};function MultiFileUploader(a,b,c,d,h,f,e,m,t){this.field_name=$("#"+a).attr("receiver");this.obj_file=b;this.limitSize=t;this.service_action=c;this.complete_action=h;this.file_handling=f;this.image_gallery=JSON.parse(e);this.popover=JSON.parse(m);this.parent_container=$("#"+d);this.instances=[];this.messages=[];var k=this;this.createStatusRow=function(){var g=k.parent_container.find("[widget=tmultifile]")[0],l=$(g).css("width"),q=$("<div />",{"class":"tfile_row_wrapper tfile_row_wrapper-"+a});g=$("<div />",
{"class":"tfile_row_1"});var w=$("<div />",{"class":"tfile_row_2"});l=$("<div />",{"class":"tfile_link_wrapper",style:"width: calc("+l+" - 25px)"});var v=$("<span />",{"class":"tfile_del_icon fa fa-minus-circle gray",title:"Remover"}),u=$("<div />",{"class":"progress-bar progress-bar-success",style:"width: 0%; height: 2px;"}),D=$("<input />",{type:"hidden",name:k.field_name+"[]"});"1"==k.image_gallery.enabled&&($(l).css("width","unset"),$(q).css("border","1px solid gray"),$(q).css("border-radius",
"3px"),$(q).css("margin","2px"),$(q).css("display","inline-block"));k.file_row_wrapper=q;k.file_input_hidden=D;k.file_progress_bar=u;k.file_link_wrapper=l;k.parent_container.append(q);q.append(g);q.append(w);g.append(D,l,v);w.append(u);$(v).click(function(){var A=k.getData();q.hide();k.parent_container.children("i").attr({"class":"",title:""});k.parent_container.find("[widget=tmultifile]").css("padding-left","5px");A.delFile=A.fileName;A.delFile==A.newFile&&(A="",k.setData(A),q.remove());k.setData(A)});
return q};this.createInputHidden=function(g){g=$("<input />",{type:"hidden",name:k.field_name+"[]",widget:"thidden",value:g});k.parent_container.append(g);return g};this.showFile=function(g){"undefined"==typeof g&&(g=this.getData());if(g=g.fileName){var l=k.file_row_wrapper,q=l.find(".tfile_link_wrapper");l.find(".progress-bar").css("width","100%");if(-1<$.inArray(g.split(".").pop().toLowerCase(),"png jpg jpeg gif svg webp ico fav".split(" ")))if(l='<img style="max-width:460px" src="download.php?file={file_name}">',
k.popover.content&&(l=atob(k.popover.content)),l=l.replace("{file_name}",g),"1"==k.image_gallery.enabled){var w=$("<a />",{href:"download.php?file="+g,target:"_blank"}),v=$("<img />",{src:"download.php?file="+g}).height(k.image_gallery.height).width(k.image_gallery.width);w.append(v);"1"==k.popover.enabled&&q.popover({trigger:"hover",content:l,html:!0,container:"body",template:'<div class="popover" role="tooltip" style="z-index:100000;max-width:800px"><div class="arrow"></div><h3 class="popover-title popover-header"></h3><div class="popover-content popover-body"><div class="data-content"></div></div></div>',
title:k.popover.title||""})}else w=$("<a />",{href:"download.php?file="+g,target:"_blank"}),"1"==k.popover.enabled&&w.popover({trigger:"hover",content:l,html:!0,container:"body",template:'<div class="popover" role="tooltip" style="z-index:100000;max-width:800px"><div class="arrow"></div><h3 class="popover-title popover-header"></h3><div class="popover-content popover-body"><div class="data-content"></div></div></div>',title:k.popover.title||""});else w=$("<a />",{href:"download.php?file="+g,target:"_blank"});
"1"!=k.image_gallery.enabled&&w.append(g);q.html(w)}};this.getData=function(){var g=decodeURIComponent(k.file_input_hidden.val()),l="";try{l=g?JSON.parse(g):{}}catch(q){l={}}return l};this.setData=function(g){g?$(k.file_input_hidden).val(encodeURIComponent(JSON.stringify(g))):$(k.file_input_hidden).val("")};this.supportAjaxUploadWithProgress=function(){return this.supportFileAPI()&&this.supportAjaxUploadProgressEvents()&&this.supportFormData()};this.supportFileAPI=function(){var g=document.createElement("INPUT");
g.type="file";return"files"in g};this.supportAjaxUploadProgressEvents=function(){var g=new XMLHttpRequest;return!!(g&&"upload"in g&&"onprogress"in g.upload)};this.supportFormData=function(){return!!window.FormData};this.initFileUpload=function(){var g=new FormData,l=k.obj_file;g.append("fileName",l);if(k.limitSize&&(this.onLoadStart(),l.size>k.limitSize))throw Error(_t("large_file")+k.limitSize/1024/1024+"MBs");this.createStatusRow();this.supportAjaxUploadWithProgress()&&this.sendXHRequest(g,k.service_action)};
this.sendXHRequest=function(g,l){var q=new XMLHttpRequest;q.upload.addEventListener("loadstart",this.onLoadStart,!1);q.upload.addEventListener("progress",this.onProgress,!1);q.upload.addEventListener("load",this.onLoad,!1);q.addEventListener("readystatechange",this.onReadyStateChange,!1);q.open("POST",l,!0);q.send(g)};this.onLoadStart=function(g){0==k.parent_container.children("i").length&&k.parent_container.prepend($("<i>"));k.parent_container.find("[widget=tmultifile]").css("padding-left","20px");
k.parent_container.children("i").attr({"class":"fa fa-spinner fa-spin fa-fw blue file-response-icon","data-original-title":"...",title:"..."})};this.onLoad=function(g){};this.onProgress=function(g){g.lengthComputable&&(g=Math.round(100*g.loaded/g.total),k.file_progress_bar.css("width",g+"%").css("height",2),k.file_link_wrapper.html(g+"%"))};this.onReadyStateChange=function(g){var l=null;try{l=g.target.status}catch(v){return}if("200"==l&&"4"==g.target.readyState&&g.target.responseText)try{var q=JSON.parse(g.target.responseText);
if("success"==q.type){if(k.file_handling){var w=k.getData();w.newFile="tmp/"+q.fileName;w.fileName="tmp/"+q.fileName;k.setData(w);k.showFile(w)}else k.file_input_hidden.val(q.fileName),k.file_link_wrapper.html(q.fileName);k.showMessage("success",_t("success"));4==this.readyState&&"function"==typeof k.complete_action&&k.complete_action()}else k.file_row_wrapper.remove(),k.showMessage("error",q.msg)}catch(v){k.file_row_wrapper.remove(),"undefined"==typeof q?k.showMessage("error",g.target.responseText):
k.showMessage("error",v)}};this.showMessage=function(g,l){k.parent_container.children("i").removeAttr("data-original-title");0<k.messages.length?("success"!=g?k.messages.push(l):k.messages.push("success"),g=0<k.messages.filter(q=>"success"==q).length?"fa fa-info-circle blue":"fa fa-exclamation-circle red",k.parent_container.find("[widget=tmultifile]").css("padding-left","20px"),k.parent_container.children("i").attr({"class":g+" file-response-icon",title:k.messages.filter(q=>"success"!=q).join(", "),
"data-original-title":k.messages.filter(q=>"success"!=q).join(", ")})):"success"==g?(k.parent_container.find("[widget=tmultifile]").css("padding-left","20px"),k.parent_container.children("i").attr({"class":"far fa-check-circle green file-response-icon",title:l,"data-original-title":l})):(k.messages.push(l),k.parent_container.find("[widget=tmultifile]").css("padding-left","20px"),k.parent_container.children("i").attr({"class":"fa fa-exclamation-circle red file-response-icon",title:l,"data-original-title":l}))};
this.clear=function(){$(".tfile_row_wrapper-"+a).each(function(){$(this).find("input").each(function(){$(this).val("")});$(this).remove()});k.parent_container.children("i").attr({"class":"",title:""});k.parent_container.find("[widget=tmultifile]").css("padding-left","5px");$('[name="file_'+this.field_name+'[]"]').val("");$(this.file_input_hidden).val("");$("#"+this.input_id).val("")};this.setValue=function(g){this.clear();if(g){try{g=JSON.parse(g)}catch(v){}for(var l in g){var q=g[l],w={idFile:l,
fileName:q};0<=q.indexOf("%7B%")&&(w=JSON.parse(decodeURIComponent(q)));this.file_handling?(this.createStatusRow(),this.setData(w),this.showFile()):this.createInputHidden(q)}}};this.updateValueInfo=function(){var g=new DataTransfer,l=k.instances.map(q=>q.obj_file);for(let q=0;q<l.length;q++)g.items.add(l[q]);$("#"+a)[0].files=g.files};this.addInstance=function(g){this.instances.push(g)}}
function tmultifile_start(a,b,c,d,h,f,e,m){var t=new MultiFileUploader(a,null,c,b,d,h,f,e,m);$(function(){$("#"+a).change(function(){t.messages=[];$.each($(this).prop("files"),function(k,g){k=new MultiFileUploader(a,g,c,b,d,h,f,e,m);k.messages=t.messages;try{k.initFileUpload(),t.addInstance(k)}catch(l){k.showMessage("error",k.obj_file.name+": "+l.message)}});t.updateValueInfo()});h&&$("#"+a).parent().children("input[type=hidden]").each(function(k,g){k=new MultiFileUploader(a,null,c,b,d,h,f,e,m);k.createStatusRow();
$(g).val()&&k.setData(JSON.parse(decodeURIComponent($(g).val())));k.showFile();$(g).remove();t.addInstance(k)});$("#"+a)[0].tmultifile=t})}function tmultifile_enable_field(a,b){try{$("form[name="+a+"] [name='file_"+b+"[]']").removeAttr("disabled"),$("form[name="+a+"] [name='file_"+b+"[]']").removeClass("tfield_disabled").addClass("tfield")}catch(c){console.log(c)}}
function tmultifile_disable_field(a,b){try{$("form[name="+a+"] [name='file_"+b+"[]']").attr("disabled",!0),$("form[name="+a+"] [name='file_"+b+"[]']").removeClass("tfield").addClass("tfield_disabled")}catch(c){console.log(c)}}function tmultifile_clear_field(a,b){try{$("form[name="+a+"] [name='"+b+"[]']").val(""),$("form[name="+a+"] [name='file_"+b+"[]']").val("")}catch(c){console.log(c)}};function thtmleditor_enable_field(a,b){setTimeout(function(){$("form[name="+a+"] [name="+b+"]").next().find(".note-editable").attr("contenteditable",!0)},1)}function thtmleditor_disable_field(a,b){setTimeout(function(){$("form[name="+a+"] [name="+b+"]").next().find(".note-editable").attr("contenteditable",!1)},1)}function thtmleditor_clear_field(a,b){setTimeout(function(){$("form[name="+a+"] [name="+b+"]").code("")},1)}
function thtmleditor_get_length(a){a=a.replace(/(<p><br><\/p>)/ig," ");a=a.replace(/(<([^>]+)>)/ig,"");a=a.replace(/(&nbsp;)/ig," ");return a.length}function thtmleditor_insert_text(a,b,c){$("form[name="+a+"] [name="+b+"]").summernote("editor.saveRange");$("form[name="+a+"] [name="+b+"]").summernote("editor.restoreRange");$("form[name="+a+"] [name="+b+"]").summernote("editor.focus");$("form[name="+a+"] [name="+b+"]").summernote("editor.insertText",c)}
function thtmleditor_start(a,b,c,d,h,f){h=Object.assign({dialogsInBody:!0,fontSizes:"8 9 10 11 12 14 18 24 36 48 64 82 150".split(" "),width:b,height:c,lang:d,toolbar:[["undoredo",["undo","redo"]],["style",["style","bold","italic","underline","clear"]],["font",["fontname","fontsize","color"]],["para",["ul","ol","paragraph","height"]],["insert",["table","link","picture","hr"]],["view",["fullscreen","codeview","help"]]]},JSON.parse(h));if(f){b=JSON.parse(f);h.buttons={};d=[];for(const e of b)d.push(["mybutton_"+
e.name,[e.name]]),h.buttons[e.name]=function(m){return $.summernote.ui.button({contents:base64_decode(e.icon)+(e.showLabel?base64_decode(e.title):""),tooltip:e.showLabel?null:base64_decode(e.title),click:function(){eval("((param) => ("+base64_decode(e.function)+")(param))(context)")}}).render()};h.toolbar.push(...d)}"undefined"!==typeof h.completion&&("undefined"==typeof summernote_wordlist&&(summernote_wordlist={}),summernote_wordlist[a]=h.completion,h.hint={match:/\b(\w{1,})$/,search:function(e,
m){m($.grep(summernote_wordlist[a],function(t){return 0===t.indexOf(e)}))}});1==h.airMode&&setTimeout(function(){$("#"+a).parent().find(".note-editable").height(c+"px").css("overflow","auto")},1);h.maxlength&&0<h.maxlength&&(h.callbacks={onKeydown:function(e){thtmleditor_get_length($(e.currentTarget).html())+1>h.maxlength&&([8,33,34,35,36,37,38,39,40,45,46].includes(e.keyCode)||e.preventDefault())},onKeyup:function(e){e=thtmleditor_get_length($(e.currentTarget).html());$("#"+a).next(".note-editor").find(".counter").html(e+
"/"+h.maxlength)},onPaste:function(e){e.preventDefault()}});$("#"+a).summernote(h);h.maxlength&&0<h.maxlength&&(b=$("#"+a).parent().find(".note-editable").html(),b=thtmleditor_get_length(b),$("#"+a).next(".note-editor").append('<small style="position:absolute;bottom:10px;right:4px;" class="counter">'+b+"/"+h.maxlength+"</small>"));"undefined"!==typeof $("#"+a).next(".note-editor")[0]&&(b=$("#"+a).next(".note-editor")[0],$(b).css("margin",$("#"+a).css("margin")))}
function thtml_editor_reload_completion(a,b){objectId=$("[name="+a+"]").attr("id");setTimeout(function(){summernote_wordlist[objectId]=b},1)};function tmenubar_start(){$(document).ready(function(){$(".dropdown-toggle").dropdown()})};function tmultisearch_start(a,b,c,d,h,f,e,m,t,k,g){b={minimumInputLength:b,maximumSelectionLength:c,selectionTitleAttribute:g,allowClear:m,placeholder:d,multiple:h,minimumResultsForSearch:t,id:function(l){return l.id+"::"+l.text},templateResult:function(l){return/<[a-z][\s\S]*>/i.test(l.text)?$("<span>"+l.text+"</span>"):l.text},templateSelection:function(l){return/<[a-z][\s\S]*>/i.test(l.text)?$("<span>"+l.text+"</span>"):l.text}};"1"!==h&&delete b.maximumSelectionLength;$("#"+a).select2(b).on("select2:unselecting",
function(){$(this).data("unselecting",!0)}).on("select2:opening",function(l){$(this).data("unselecting")&&($(this).removeData("unselecting"),l.preventDefault())});if("undefined"!=typeof k)$("#"+a).on("change",function(l){k()});1!==parseInt(c)&&($("#"+a).parent().find(".select2-selection").height(e),$("#"+a).parent().find(".select2-selection").find(".select2-selection__rendered").height(e),$("#"+a).parent().find(".select2-selection").find(".select2-selection__rendered").css("overflow-y","auto"))}
function tmultisearch_clear_field(a,b){try{$("form[name="+a+'] [name="'+b+'[]"]').val("").trigger("change"),$("form[name="+a+'] [name="'+b+'"]').val("").trigger("change")}catch(c){console.log(c)}}function tmultisearch_enable_field(a,b){try{0<$("form[name="+a+'] [name="'+b+'"]').length?$("form[name="+a+'] [name="'+b+'"]').next(".select2").find(".select2-disable").remove():$("form[name="+a+'] [name="'+b+'[]"]').next(".select2").find(".select2-disable").remove()}catch(c){console.log(c)}}
function tmultisearch_disable_field(a,b,c){c||="";try{0<$("form[name="+a+'] [name="'+b+'"]').length?$("form[name="+a+'] [name="'+b+'"]').next(".select2").prepend('<div title="'+c+'" class="select2-disable"></div>'):0<$("[form="+a+'] [name="'+b+'"]').length?$("[form="+a+'] [name="'+b+'"]').next(".select2").prepend('<div title="'+c+'" class="select2-disable"></div>'):$("form[name="+a+'] [name="'+b+'[]"]').next(".select2").prepend('<div title="'+c+'" class="select2-disable"></div>')}catch(d){console.log(d)}}
$.fn.select2.amd.require(["select2/selection/search"],function(a){var b=a.prototype.searchRemoveChoice;a.prototype.searchRemoveChoice=function(){b.apply(this,arguments);this.$search.val("")}});$.fn.select2.amd.require(["select2/selection/single"],function(a){var b=a.prototype.update;a.prototype.update=function(c){b.apply(this,Array.prototype.slice.apply(arguments));this.$selection.find(".select2-selection__rendered").removeAttr("title")}});
$.fn.select2.amd.require(["select2/selection/multiple"],function(a){var b=a.prototype.update;a.prototype.update=function(c){b.apply(this,Array.prototype.slice.apply(arguments));!1===this.options.get("selectionTitleAttribute")&&this.$selection.find(".select2-selection__rendered").find(".select2-selection__choice").removeAttr("title")}});$(document).on("select2:open",()=>{let a=document.querySelectorAll(".select2-container--open .select2-search__field");a[a.length-1].focus()});function tmultientry_start(a,b,c,d,h){b={tags:!0,maximumSelectionLength:b,width:c,height:d,tokenSeparators:[",",";"]};if("undefined"!=typeof h)$("#"+a).on("change",function(f){h()});$("#"+a).select2(b);$("#"+a).parent().find(".select2-selection").height(d);$("#"+a).parent().find(".select2-selection").find(".select2-selection__rendered").height(d);$("#"+a).parent().find(".select2-selection").find(".select2-selection__rendered").css("overflow-y","auto")};function tdbuniquesearch_set_value(a,b,c,d){setTimeout(function(){var h="#"==b.substr(0,1)?$(b):$("form[name="+a+"] [name="+b+"]"),f=h.data("select2").options.options.hash;f=h.data("select2").options.options.ajax.url+"&hash="+f+"&value="+c+"&onlyidsearch=1";$.ajax({url:f,dataType:"json"}).done(function(e){if(Array.isArray(e.result))if(0<e.result.length){var m=e.result[0].split("::");h.find("option[value='"+m[0]+"']").length||h.append(new Option(m[1],m[0],!0,!0));""==c?h.val("").trigger("change.select2"):
(e=[],e.push(m[0]),h.val(e).trigger("change.select2"));"function"==typeof d&&d()}else h.val("").trigger("change.select2");else h.val("").trigger("change.select2")}).fail(function(e,m,t){__adianti_error("Error",m+": connection failed")})},1)};function tdbmultisearch_start(a,b,c,d,h,f,e,m,t,k,g){b={minimumInputLength:b,maximumSelectionLength:c,allowClear:!0,selectionTitleAttribute:g,placeholder:d,multiple:h,hash:t,id:function(l){return l.id+"::"+l.text},templateResult:function(l){return/<[a-z][\s\S]*>/i.test(l.text)?$("<span>"+l.text+"</span>"):l.text},templateSelection:function(l){return/<[a-z][\s\S]*>/i.test(l.text)?$("<span>"+l.text+"</span>"):l.text},ajax:{url:f,dataType:"json",delay:250,data:function(l,q){return{value:l.term,hash:t}},
processResults:function(l,q){var w=[];$(l.result).each(function(v){v=this.split("::");w.push({id:v[0],text:v[1]})});return{results:w}}}};"1"!==h&&delete b.maximumSelectionLength;$("#"+a).select2(b).on("select2:unselecting",function(){$(this).data("unselecting",!0)}).on("select2:opening",function(l){$(this).data("unselecting")&&($(this).removeData("unselecting"),l.preventDefault())});if("undefined"!=typeof k)$("#"+a).on("change",function(l){k()});1!==parseInt(c)&&($("#"+a).parent().find(".select2-selection").height(m),
$("#"+a).parent().find(".select2-selection").find(".select2-selection__rendered").height(m),$("#"+a).parent().find(".select2-selection").find(".select2-selection__rendered").css("overflow-y","auto"))}
function tdbmultisearch_set_value(a,b,c,d){setTimeout(function(){var h="#"==b.substr(0,1)?$(b):$("form[name="+a+'] [name="'+b+'[]"]'),f=h.data("select2").options.options.hash;f=h.data("select2").options.options.ajax.url+"&hash="+f+"&value="+c+"&operator_idsearch=in&onlyidsearch=1&jsonvalue=1";$.ajax({url:f,dataType:"json"}).done(function(e){if(Array.isArray(e.result))if(0<e.result.length){var m=[];for(const t of e.result)e=t.split("::"),m.push(e[0]),h.find("option[value='"+e[0]+"']").length||h.append(new Option(e[1],
e[0],!0,!0));""==c||"[]"==c?h.val("").trigger("change.select2"):h.val(m).trigger("change.select2");"function"==typeof d&&d()}else h.val("").trigger("change.select2");else h.val("").trigger("change.select2")}).fail(function(e,m,t){__adianti_error("Error",m+": connection failed")})},1)};function tradiogroup_enable_field(a,b){setTimeout(function(){$("form[name="+a+"] [name="+b+"]").attr("onclick",null);$("form[name="+a+"] [name="+b+"]").css("pointer-events","auto");$("form[name="+a+"] [name="+b+"]").closest(".toggle-wrapper").removeClass("tfield_block_events")},1)}
function tradiogroup_disable_field(a,b){setTimeout(function(){$("form[name="+a+"] [name="+b+"]").attr("onclick","return false");$("form[name="+a+"] [name="+b+"]").css("pointer-events","none");$("form[name="+a+"] [name="+b+"]").closest(".toggle-wrapper").addClass("tfield_block_events")},1)}function tradiogroup_clear_field(a,b){setTimeout(function(){$("form[name="+a+"] [name="+b+"]").attr("checked",!1)},1)}function tradiogroup_reload(a,b,c){$("form[name="+a+"] [tradiogroup="+b+"]").replaceWith(c)};function tseekbutton_enable_field(a,b){try{$("form[name="+a+"] [name="+b+"]").attr("disabled",!1),$("form[name="+a+"] [name="+b+"]").removeClass("tfield_disabled").addClass("tseekentry")}catch(c){console.log(c)}setTimeout(function(){$("form[name="+a+"] [for="+b+"]").show()},1)}
function tseekbutton_disable_field(a,b){try{$("form[name="+a+"] [name="+b+"]").attr("disabled",!0),$("form[name="+a+"] [name="+b+"]").addClass("tfield_disabled").removeClass("tseekentry")}catch(c){console.log(c)}setTimeout(function(){$("form[name="+a+"] [for="+b+"]").hide()},1)};function tlabel_toggle_visibility(a){$("#"+a).find("i").on("click",function(b){b=$(this).prev();"none"===b.css("filter")?(b.css("filter","blur(5px)"),$(this).switchClass("fa-eye","fa-eye-slash")):(b.css("filter",""),$(this).switchClass("fa-eye-slash","fa-eye"))})};function tselect_enable_field(a,b){try{$("form[name="+a+'] [name="'+b+'[]"]').attr("disabled",!1),$("form[name="+a+'] [name="'+b+'[]"]').removeClass("tcombo_disabled").addClass("tcombo")}catch(c){console.log(c)}}function tselect_disable_field(a,b){try{$("form[name="+a+'] [name="'+b+'[]"]').attr("disabled",!0),$("form[name="+a+'] [name="'+b+'[]"]').removeClass("tcombo").addClass("tcombo_disabled")}catch(c){console.log(c)}}
function tselect_clear_field(a,b){try{$("form[name="+a+'] [name="'+b+'[]"]').val("")}catch(c){console.log(c)}}function tselect_create_opt_group(a,b,c){a="undefined"!=typeof a&&""!=a?'form[name="'+a+'"] ':"";var d='[name="'+b+'[]"]';-1==b.indexOf("[")&&0<$("#"+b).length&&(d="#"+b);$('<optgroup label="'+c+'"></optgroup>').appendTo(a+d)}
function tselect_add_option(a,b,c,d){c=c.replace(/"/g,"");a="undefined"!=typeof a&&""!=a?'form[name="'+a+'"] ':"";var h='select[name="'+b+'[]"]';-1==b.indexOf("[")&&0<$("#"+b).length&&(h="#"+b);b=$(a+h).find("optgroup");0<b.length?$('<option value="'+c+'">'+d+"</option>").appendTo(b.last()):$('<option value="'+c+'">'+d+"</option>").appendTo(a+h)}
function tselect_clear(a,b,c){"undefined"==typeof c&&(c=!0);a="undefined"!=typeof a&&""!=a?'form[name="'+a+'"] ':"";var d='[name="'+b+'[]"]';-1==b.indexOf("[")&&0<$("#"+b).length&&(d="#"+b);b=$(a+d);b.val(!1);b.html("");c&&b.attr("changeaction")&&tform_events_hang_exec(b.attr("changeaction"))}
function tselect_enable_search(a,b){$(a).removeAttr("onchange");$(a).select2({allowClear:!0,multiple:!0,placeholder:b,templateResult:function(c){return/<[a-z][\s\S]*>/i.test(c.text)?$("<span>"+c.text+"</span>"):c.text},templateSelection:function(c){return/<[a-z][\s\S]*>/i.test(c.text)?$("<span>"+c.text+"</span>"):c.text}}).on("change",function(c){(new Function($(a).attr("changeaction")))()})};function tslider_start(a,b,c,d,h){b=$(a).val();$(a).wrap('<div class="tslidercontainer">');$(a).before('<div class="label">'+b+"</div>");$(a).on("input",function(){$(a).parent().find(".label").html(this.value)})}function tslider_enable_field(a,b){setTimeout(function(){$("form[name="+a+"] [name="+b+"]").css("pointer-events","auto");$("form[name="+a+"] [name="+b+"]").removeClass("tfield_disabled")},1)}
function tslider_disable_field(a,b){setTimeout(function(){$("form[name="+a+"] [name="+b+"]").css("pointer-events","none");$("form[name="+a+"] [name="+b+"]").addClass("tfield_disabled")},1)};function tsortlist_start(a,b,c,d){$(a).sortable({connectWith:b,tolerance:"pointer",start:function(h,f){f.item.data("index",f.item.index());f.item.data("parenta",this.id)},receive:function(h,f){0<d&&$(this).children().length>d?$(f.sender).sortable("cancel"):(h=$(this),targetListName=this.getAttribute("itemname"),document.getElementById(f.item.attr("id")+"_input").name=targetListName+"[]",f.item.css("display")!==h.attr("itemdisplay")&&(f.item.css("display",h.attr("itemdisplay")),detached=f.item.detach(),
$(h).append(detached)))},deactivate:c}).disableSelection()}function tsortlist_enable_field(a,b){setTimeout(function(){$("form[name="+a+"] [itemname="+b+"]").sortable("enable")},1)}function tsortlist_disable_field(a,b){setTimeout(function(){$("form[name="+a+"] [itemname="+b+"]").sortable("disable")},1)}function tsortlist_clear_field(a,b){setTimeout(function(){$("form[name="+a+"] [itemname="+b+"]").empty()},1)}
function tsortlist_add_item_field(a,b,c,d,h){var f=document.createElement("li"),e=document.createElement("label"),m=document.createElement("input");e.setAttribute("style","width: 100%;");f.setAttribute("class","tsortlist_item btn btn-default ui-sortable-handle");f.setAttribute("style","display: block; height: auto;");f.setAttribute("id","tsortlist_"+b+"_item_"+h+"_li");e.innerHTML=d;m.setAttribute("id","tsortlist_"+b+"_item_"+h+"_li_input");m.setAttribute("name",b+"[]");m.setAttribute("value",c);
m.setAttribute("type","hidden");f.appendChild(e);f.appendChild(m);setTimeout(function(){$("form[name="+a+"] [itemname="+b+"]").append(f)},1)};function tspinner_start(a,b,c){var d=c?"tstepper":"";$(a).wrap('<div class="input-group spinner '+d+'" data-trigger="spinner">');c?($(a).before('<a href="javascript:;" class="spin-minus" data-spin="down"><i class="fa fa-minus"></i></a>'),$(a).after('<a href="javascript:;" class="spin-plus" data-spin="up"><i class="fa fa-plus"></i></a>')):$(a).after('<div class="input-group-addon"> <a href="javascript:;" class="spin-up" data-spin="up"><i class="fa fa-caret-up"></i></a> <a href="javascript:;" class="spin-down" data-spin="down"><i class="fa fa-caret-down"></i></a> </div>');
$(a).parent().spinner("changing",function(h,f,e){$(a).attr("exitaction")&&(new Function($(a).attr("exitaction")))();"function"==typeof b&&b()})}function tspinner_enable_field(a,b){setTimeout(function(){$("form[name="+a+"] [name="+b+"]").parent().css("pointer-events","auto");$("form[name="+a+"] [name="+b+"]").removeClass("tfield_disabled");$("form[name="+a+"] [name="+b+"]").removeAttr("readonly")},1)}
function tspinner_disable_field(a,b){setTimeout(function(){$("form[name="+a+"] [name="+b+"]").parent().css("pointer-events","none");$("form[name="+a+"] [name="+b+"]").addClass("tfield_disabled");$("form[name="+a+"] [name="+b+"]").attr("readonly",!0)},1)};function tfullcalendar_start(a,b,c,d,h,f,e,m,t,k,g,l,q,w,v,u){var D=0,A=0;f.failure=function(z){__adianti_failure_request(z.xhr,z.xhr.status,z.xhr.statusText)};b={headerToolbar:{left:"prev,next today",center:"title",right:"timeGridDay,timeGridWeek,dayGridMonth,listWeek"},locale:h,themeSystem:"bootstrap",hiddenDays:l,initialDate:d,initialView:c,allDaySlot:!1,datesSet:function(z,G){setTimeout(function(){__adianti_process_popover()},100)},slotMinTime:k,slotMaxTime:g,slotLabelFormat:{hour12:!1,hour:"2-digit",
minute:"2-digit"},eventTimeFormat:{hour12:!1,hour:"2-digit",minute:"2-digit"},editable:b,dayMaxEventRows:!0,events:f,eventDurationEditable:w,eventStartEditable:q,eventDisplay:"block",eventSourceSuccess:function(z){setTimeout(__adianti_process_popover,1500);return z.eventArray},eventContent:function(z){return{html:z.event.title}},dateClick:function(z){if(""!==e&&0==D&&0==A){var G=z.allDay?z.dateStr:moment(z.date).format("YYYY-MM-DD HH:mm:ss");__adianti_load_page(e+"&date="+G+"&view="+z.view.type)}},
eventClick:function(z){""!==m&&0==D&&0==A&&__adianti_load_page(m+"&id="+z.event.id+"&key="+z.event.id+"&view="+z.view.type)},eventDragStart:function(){D=1},eventDragStop:function(){D=0},eventDrop:function(z){""!==t&&__adianti_ajax_exec(t+"&id="+z.event.id+"&key="+z.event.id+"&start_time="+moment(z.event.start).format("YYYY-MM-DD HH:mm:ss")+"&end_time="+moment(z.event.end).format("YYYY-MM-DD HH:mm:ss"))},eventResizeStart:function(){A=1},eventResizeStop:function(){A=0},eventResize:function(z){""!==
t&&__adianti_ajax_exec(t+"&id="+z.event.id+"&key="+z.event.id+"&start_time="+moment(z.event.start).format("YYYY-MM-DD HH:mm:ss")+"&end_time="+moment(z.event.end).format("YYYY-MM-DD HH:mm:ss"))}};u&&(u=($(document).innerHeight()??0)-($("html nav.navbar").innerHeight()??0)-($(".adianti_tabs_container").innerHeight()??0)-$("#adianti_div_content").innerHeight()-($("footer.main-footer").innerHeight()??0)-40,u=Math.max(u,325),b.expandRows=!0,b.height=`${u}px`);v=Object.assign(b,JSON.parse(v));u=$("#"+a)[0];
var E=new FullCalendar.Calendar(u,v);E.render();(new ResizeObserver(function(){E.render()})).observe(u);$("#"+a).data("fullcalendar",E)};function ticonview_contextmenu_start(a){$("#"+a).contextmenu(function(b){$(".dropdown-iconview").hide();var c=$("#"+a).next("ul");c.css("left",ticonview_mouseX(b,$("#"+a)));c.css("top",ticonview_mouseY(b,$("#"+a)));c.show();b.preventDefault()});return!1}function ticonview_bind_click(){$(document).bind("click",function(a){$(".dropdown-iconview").hide()})}
function ticonview_mouseX(a,b){var c=0;0<$(b).closest(".ui-dialog").length&&(c=$(b).closest(".ui-dialog").offset().left);return a.pageX?a.pageX-c:a.clientX?a.clientX+(document.documentElement.scrollLeft?document.documentElement.scrollLeft:document.body.scrollLeft)-c:null}
function ticonview_mouseY(a,b){var c=0;0<$(b).closest(".ui-dialog").length&&(c=$(b).closest(".ui-dialog").offset().top+50);return a.pageY?a.pageY-c:a.clientY?a.clientY+(document.documentElement.scrollTop?document.documentElement.scrollTop:document.body.scrollTop)-c:null}
function ticonview_move_start(a,b,c,d){$("#"+a+" li"+c).draggable({zIndex:1E5,cursor:"pointer",start:function(h,f){$(this).css("opacity",.5);$(this).addClass("iconview-drag")},stop:function(h,f){$(this).css("opacity",1)},revert:function(h,f){$(this).data("uiDraggable").originalPosition={top:0,left:0};return!h}});$("ul.ticonview li"+d).droppable({accept:".iconview-drag",drop:function(h,f){h=$(f.draggable).data();f=$(this).data();var e={},m;for(m in h)!h.hasOwnProperty(m)||"string"!=typeof h[m]&&"number"!=
typeof h[m]||(e["source_"+m]=h[m]);for(m in f)!f.hasOwnProperty(m)||"string"!=typeof f[m]&&"number"!=typeof f[m]||(e["target_"+m]=f[m]);__adianti_load_page(b+"&"+$.param(e))},over:function(h,f){$(this).addClass("ui-over").addClass($(this).attr("id"))},out:function(h,f){$(this).removeClass("ui-over")}})};function kanban_start_board(a,b){$("#"+a).sortable({revert:200,placeholder:"kanban-stage-placeholder",forcePlaceholderSize:!0,helper:function(c,d){return $(d).clone().addClass("kanban-dragging")},start:function(c,d){d.item.show().addClass("kanban-ghost")},stop:function(c,d){d.item.show().removeClass("kanban-ghost")},update:function(c,d){c=$(d.item).attr("stage_id");var h=[];$(".kanban-stage").each(function(){h.push($(this).attr("stage_id"))});d=h.join("&order[]=");__adianti_load_page(b+"&key="+c+
"&id="+c+"&stage_id="+c+"&order[]="+d)},cursor:"move",tolerance:"pointer",cancel:".kanban-stage-actions, .kanban-item, .kanban-shortcuts"})}
function kanban_start_item(a,b){$("."+a).sortable({revert:200,placeholder:"kanban-item-placeholder",forcePlaceholderSize:!0,connectWith:".kanban-item-sortable",helper:function(c,d){return $(d).clone().addClass("kanban-dragging")},start:function(c,d){d.item.show().addClass("kanban-ghost")},stop:function(c,d){d.item.show().removeClass("kanban-ghost")},update:function(c,d){if(b&&this===d.item.parent()[0]){c=$(d.item).attr("item_id");d=$(this).attr("stage_id");var h=[];$("[stage_id="+d+"] .kanban-item").each(function(){h.push($(this).attr("item_id"))});
var f=h.indexOf("");-1!==f&&h.splice(f,1);f=h.join("&order[]=");__adianti_load_page(b+"&key="+c+"&id="+c+"&stage_id="+d+"&order[]="+f)}},cursor:"move",tolerance:"pointer",cancel:".kanban-item-content, .kanban-item-actions"})};function tchecklist_row_enable_check(a){$("table#"+a+" tbody tr").click(function(b){b.stopImmediatePropagation();b.stopPropagation();b.preventDefault();b=$(this).find("[type=checkbox]");var c=$(b).is(":checked");$(b).prop("checked",!c);c?$(this).removeClass("selected"):$(this).addClass("selected");tchecklist_fire_onselect($("table#"+a))});$("table#"+a+" tbody tr input[type=checkbox]").click(function(b){b.stopPropagation();b=$(this).is(":checked");var c=$(this).closest("tr");b?$(c).addClass("selected"):
$(c).removeClass("selected");tchecklist_fire_onselect($("table#"+a))})}function tchecklist_fire_onselect(a){var b=a.attr("onselect");if(b){var c=a.attr("name");a=a.find("tr.selected").find('input[type="checkbox"]');var d={};d[c]=[];a.each(function(h,f){h=$(f).attr("name");h=h.replace("check_"+c+"_","");d[c].push(base64_decode(h))});__adianti_post_exec(b,d,null,void 0,"1")}}
function tchecklist_select_all(a,b){$("table#"+b+" tbody tr:visible td input[type=checkbox]").each(function(c,d){c=d.closest("tr");!a.checked&&d.checked?($(d).prop("checked",!1),$(c).removeClass("selected")):a.checked&&!d.checked&&($(d).prop("checked",!0),$(c).addClass("selected"))});tchecklist_fire_onselect($("table#"+b))}
function tchecklist_enable_field(a){try{0<$('table.tchecklist[name="'+a+'"]').length&&$('table.tchecklist[name="'+a+'"]').parent().find(".tchecklist-disable").remove()}catch(b){console.log(b)}}function tchecklist_disable_field(a){try{0<$('table.tchecklist[name="'+a+'"]').length&&$('table.tchecklist[name="'+a+'"]').parent().prepend('<div class="tchecklist-disable"></div>')}catch(b){console.log(b)}};var tbarcodeinputreader,tbarcodeinputreader_receive;
function tbarcodeinputreader_open_reader(a){var b=a+"_reader",c=a+"_container",d=.9*$(window).width(),h=.8*$(window).height(),f=document.createElement("div"),e=document.createElement("div"),m=document.createElement("video");f.title="Barcode";f.id=c;m.id=b;e.id=b+"-cameras";f.setAttribute("class","tbarcodeinputreader_container");m.setAttribute("class","tbarcodeinputreader_reader");e.setAttribute("class","tbarcodeinputreader-cameras");f.appendChild(m);f.appendChild(e);$("#adianti_div_content").append(f);
tbarcodeinputreader_start(b,function(){tjquerydialog_start("#"+c,!0,!1,!1,d,h,0,0,99999,[],function(){tbarcodeinputreader.closing=!0;tbarcodeinputreader_stop()},!0,"")},function(t){__adianti_block_ui();$("#"+a).val(t);tbarcodeinputreader_stop();"undefined"!==typeof $("#"+a).attr("changeaction")&&Function($("#"+a).attr("changeaction"))();__adianti_unblock_ui()})}
function tbarcodeinputreader_start(a,b,c){tbarcodeinputreader=new ZXing.BrowserBarcodeReader;tbarcodeinputreader.closing=!1;tbarcodeinputreader._stopContinuousDecode=!1;tbarcodeinputreader_receive=c;tbarcodeinputreader.listVideoInputDevices().then(function(d){d&&0!=d.length&&(b(),1<d.length&&trbarcodeinputreader_make_radio_camera(a,d),tbarcodeinputreader_read(d[d.length-1].deviceId,a))}).catch(function(d){__adianti_error("Error",d)})}
function trbarcodeinputreader_make_radio_camera(a,b){for(var c=0;c<b.length;c++){var d=b[c],h=document.createElement("input"),f=document.createElement("label");h.id=d.deviceId;h.type="radio";h.name=a+"-camera";h.setAttribute("onchange","tbarcodeinputreader_restart('"+d.deviceId+"','"+a+"');");f.for=d.deviceId;f.appendChild(h);f.appendChild(document.createTextNode(d.label));c==b.length-1&&(h.checked=!0);$("#"+a+"-cameras").append(f)}}
function tbarcodeinputreader_stop(){tbarcodeinputreader_close()}function tbarcodeinputreader_close(){tbarcodeinputreader.reset();$(".tbarcodeinputreader_container").closest(".ui-dialog").remove();$(".tbarcodeinputreader_container").remove()}function tbarcodeinputreader_restart(a,b){tbarcodeinputreader.closing=!0;tbarcodeinputreader.reset();tbarcodeinputreader_read(a,b)}
function tbarcodeinputreader_read(a,b){tbarcodeinputreader.decodeOnceFromVideoDevice(a,b).then(function(c){tbarcodeinputreader_receive(c)}).catch(function(c){tbarcodeinputreader&&tbarcodeinputreader.closing||(tbarcodeinputreader_close(),__adianti_error("Error",c))})};var tqrcodeinputreader,tqrcodeinputreader_receive;
function tqrcodeinputreader_open_reader(a){var b=a+"_reader",c=a+"_container",d=.9*$(window).width(),h=.8*$(window).height(),f=document.createElement("div"),e=document.createElement("div"),m=document.createElement("div");f.title="QRCode";f.id=c;m.id=b;e.id=b+"-cameras";f.setAttribute("class","tqrcodeinputreader_container");m.setAttribute("class","tqrcodeinputreader_reader");e.setAttribute("class","tqrcodeinputreader-cameras");f.appendChild(m);f.appendChild(e);$("#adianti_div_content").append(f);tqrcodeinputreader_start(b,
function(){tjquerydialog_start("#"+c,!0,!1,!1,d,h,0,0,99999,[],tqrcodeinputreader_stop,!0,"")},function(t){__adianti_block_ui();$("#"+a).val(t);tqrcodeinputreader_stop();"undefined"!==typeof $("#"+a).attr("changeaction")&&Function($("#"+a).attr("changeaction"))();__adianti_unblock_ui()})}
function tqrcodeinputreader_start(a,b,c){tqrcodeinputreader=new Html5Qrcode(a);tqrcodeinputreader_receive=c;Html5Qrcode.getCameras().then(function(d){d&&0!=d.length&&(b(),1<d.length&&trqcodeinputreader_make_radio_camera(a,d),tqrcodeinputreader_read(d[d.length-1].id))}).catch(function(d){__adianti_error("Error",d)})}
function trqcodeinputreader_make_radio_camera(a,b){for(var c=0;c<b.length;c++){var d=b[c],h=document.createElement("input"),f=document.createElement("label");h.id=d.id;h.type="radio";h.name=a+"-camera";h.setAttribute("onchange","tqrcodeinputreader_restart('"+d.id+"');");f.for=d.id;f.appendChild(h);f.appendChild(document.createTextNode(d.label));c==b.length-1&&(h.checked=!0);$("#"+a+"-cameras").append(f)}}
function tqrcodeinputreader_stop(){tqrcodeinputreader&&tqrcodeinputreader._isScanning?tqrcodeinputreader.stop().then(function(){tqrcodeinputreader_close()}).catch(function(a){__adianti_error("Error",a)}):tqrcodeinputreader_close()}function tqrcodeinputreader_close(){$(".tqrcodeinputreader_container").closest(".ui-dialog").remove();$(".tqrcodeinputreader_container").remove();tqrcodeinputreader=null}
function tqrcodeinputreader_restart(a){tqrcodeinputreader.stop().then(function(){tqrcodeinputreader_read(a)}).catch(function(b){__adianti_error("Error",b)})}function tqrcodeinputreader_read(a){tqrcodeinputreader.start(a,{qrbox:.75*$("#"+tqrcodeinputreader._elementId).width()},function(b){tqrcodeinputreader_receive(b)},function(b){}).catch(function(b){__adianti_error("Error",b)})};var TImageCropper=function(a,b,c,d,h,f,e,m,t,k){this.cropper;this.url;this.name=t;this.type=k;this.fileHandling=h;this.serviceAction=d;this.field=a;this.title=b;this.buttonLabel=c;this.config=m;this.base64=f;this.webcam=e;this.file_input_hidden=$("input[name="+a+"]");this.file=$("#tfile_timagecropper_"+a);this.image=$("#timagecropper_"+a);this.actions=$("#timagecropper_"+a+"+div.timagecropper_actions");this.placeholder=this.actions.parent().find(".placeholder");this.edit=this.actions.find("[action=edit]");
this.remove=this.actions.find("[action=remove]");this.file.click(function(r){if(e&&!/Android|webOS|iPhone|iPad|iPod|BlackBerry|IEMobile|Opera Mini/i.test(navigator.userAgent)){r.preventDefault();var p=document.createElement("div");p.id="webcam_"+t.replace(".","");p.title="WebCam";$(p).addClass("timagecropper_webcam");$("#adianti_div_content").append(p);r=.75*$(window).height();var x=r/3*4;Webcam.set({image_format:"png",width:x,height:r,dest_width:x,dest_height:r,constraints:{}});Webcam.off("error");
Webcam.on("error",function(y){"FlashError"==y.name||"WebcamError"==y.name?__adianti_error("Error",y.message):__adianti_error("Error","Could not access webcam: "+y.message)});tjquerydialog_start("#"+p.id,!0,!0,!1,x,r,0,0,2050,[{text:"Capturar",click:function(){Webcam.snap(function(y){y=v(y);var B=p.id;Webcam.reset();$("#"+B).remove();l(null,[y])})}}],function(){var y=p.id;Webcam.reset();$("#"+y).remove()},!0,"");setTimeout(function(){Webcam.attach("#"+p.id)},500)}});this.dropzone=$("#timagecropper_container_"+
a);this.dropzone.on("drag dragstart dragend dragover dragenter dragleave drop",function(r){r.preventDefault();r.stopPropagation()});this.dropzone.on("dragover dragenter",function(){$("#timagecropper_container_"+a).addClass("highlight")});this.dropzone.on("dragleave dragend drop",function(){$("#timagecropper_container_"+a).removeClass("highlight")});var g=this,l=function(r,p){__adianti_block_ui();(r=p||r.target.files||r.originalEvent.dataTransfer.files)&&0<r.length&&(r=r[0],g.name=r.name,g.type=r.type,
q(r));__adianti_unblock_ui()},q=function(r){URL?(g.url=URL.createObjectURL(r),w()):FileReader&&(reader=new FileReader,reader.onload=function(p){g.url=reader.result;w()},reader.readAsDataURL(r))},w=function(){__adianti_block_ui();var r=document.createElement("div"),p=document.createElement("div"),x=document.createElement("div"),y=document.createElement("div"),B=document.createElement("img"),F=.95*$(window).width(),H=.9*$(window).height();B.src=g.url;B.id="timgagecropper_image_"+g.field;r.title=g.title;
r.id="container_timgagecropper_image_"+g.field;x.appendChild(y);p.appendChild(B);p.appendChild(x);r.appendChild(p);if(540>$(window).width())var C=F-30,I=H-200;else C=F-100,I=H-130;p.setAttribute("style","width: "+C+"px; height: "+I+"px");B.setAttribute("class","img_timagecrroper");p.setAttribute("class","container_timagecrroper");x.setAttribute("class","actions_timagecrroper");x.setAttribute("class","actions_timagecrroper");g.config.enableButtonDrag&&(p=y.appendChild,x=L(),B=M(),C=document.createElement("div"),
C.appendChild(x),C.appendChild(B),p.call(y,C));g.config.enableButtonScale&&(p=y.appendChild,x=G(),B=N(),C=document.createElement("div"),C.appendChild(x),C.appendChild(B),p.call(y,C));g.config.enableButtonZoom&&(p=y.appendChild,x=O(),B=P(),C=document.createElement("div"),C.appendChild(x),C.appendChild(B),p.call(y,C));g.config.enableButtonRotate&&(p=y.appendChild,x=Q(),B=R(),C=document.createElement("div"),C.appendChild(B),C.appendChild(x),p.call(y,C));g.config.enableButtonRotate&&y.appendChild(z());
$("#adianti_div_content").append(r);tjquerydialog_start("#"+r.id,!0,!1,!1,F,H,0,0,2050,[{text:g.buttonLabel,click:u}],null,!0,"");r=$("#timgagecropper_image_"+g.field)[0];y={viewMode:0,highlight:!0,rotatable:!0,responsive:!0,restore:!0,modal:!0,guides:!0};g.config.aspectRatio&&(y.aspectRatio=g.config.aspectRatio);g.cropper=new Cropper(r,y);__adianti_unblock_ui()},v=function(r){r=r.split(",");r=atob(r[1]);for(var p=r.length,x=new Uint8Array(p);p--;)x[p]=r.charCodeAt(p);return new File([x],g.name?g.name:
"image"+Math.floor(1E6*Math.random()+1)+".png",{type:g.type?g.type:"image/png"})},u=function(){__adianti_block_ui();var r=g.cropper.getCroppedCanvas({width:g.config.cropWidth,heigth:g.config.cropHeight}).toDataURL(g.type);$("#timagecropper_"+g.field).attr("src",r);$("#timagecropper_"+g.field).show();g.actions.show();g.placeholder.hide();if(g.base64)g.file_input_hidden.val(r);else try{var p=v(r),x=new FormData;x.append("fileName",p);var y=new XMLHttpRequest;y.open("POST",g.serviceAction,!0);y.addEventListener("readystatechange",
D,!1);y.send(x);if(g.fileHandling){var B=E();B.fileName&&B.fileName!=B.newFile&&(B.delFile=B.fileName);B.newFile="tmp/"+g.name;B.fileName="tmp/"+g.name;A(B)}else g.file_input_hidden.val(g.name)}catch(F){__adianti_error("Error",F)}$("#container_timgagecropper_image_"+g.field).closest(".ui-dialog").remove();$("#container_timgagecropper_image_"+g.field).remove();g.cropper.destroy();__adianti_unblock_ui()},D=function(r){var p=null;try{p=r.target.status}catch(y){return}if("200"==p&&"4"==r.target.readyState&&
r.target.responseText)try{var x=JSON.parse(r.target.responseText);"error"==x.type&&__adianti_error("Error",x.msg)}catch(y){__adianti_error("Error",y)}},A=function(r){r?$(g.file_input_hidden).val(encodeURIComponent(JSON.stringify(r))):$(g.file_input_hidden).val("")};g.sendData=A;var E=function(){var r=decodeURIComponent(g.file_input_hidden.val()),p="";try{p=r?JSON.parse(r):{}}catch(x){p={}}return p},z=function(){var r=document.createElement("i"),p=document.createElement("button");p.setAttribute("class",
"btn btn-default");r.setAttribute("class","fa fa-sync-alt");p.setAttribute("title",g.config.labels.reset);p.addEventListener("click",function(){g.cropper.reset()});p.addEventListener("touchstart",function(){g.cropper.reset()});p.appendChild(r);return p},G=function(){var r=document.createElement("i"),p=document.createElement("button");p.setAttribute("class","btn btn-default");r.setAttribute("class","fa fa-arrows-alt-h");p.setAttribute("title",g.config.labels.scalex);p.setAttribute("data-option","-1");
p.addEventListener("click",function(){J(this)});p.addEventListener("touchstart",function(){J(this)});p.appendChild(r);return p},N=function(){var r=document.createElement("i"),p=document.createElement("button");p.setAttribute("class","btn btn-default");r.setAttribute("class","fa fa-arrows-alt-v");p.setAttribute("title",g.config.labels.scaley);p.setAttribute("data-option","-1");p.addEventListener("click",function(){K(this)});p.addEventListener("touchstart",function(){K(this)});p.appendChild(r);return p},
J=function(r){var p=r.getAttribute("data-option");g.cropper.scaleX(p);r.setAttribute("data-option",-1*p)},K=function(r){var p=r.getAttribute("data-option");g.cropper.scaleY(p);r.setAttribute("data-option",-1*p)},L=function(){var r=document.createElement("i"),p=document.createElement("button");p.setAttribute("class","btn btn-default");r.setAttribute("class","fa fa-arrows-alt");p.setAttribute("title",g.config.labels.move);p.addEventListener("click",function(){g.cropper.setDragMode("move")});p.addEventListener("touchstart",
function(){g.cropper.setDragMode("move")});p.appendChild(r);return p},M=function(){var r=document.createElement("i"),p=document.createElement("button");p.setAttribute("class","btn btn-default");r.setAttribute("class","fa fa-crop-alt");p.setAttribute("title",g.config.labels.crop);p.addEventListener("click",function(){g.cropper.setDragMode("crop")});p.addEventListener("touchstart",function(){g.cropper.setDragMode("crop")});p.appendChild(r);return p},O=function(){var r=document.createElement("i"),p=
document.createElement("button");p.setAttribute("class","btn btn-default");r.setAttribute("class","fa fa-search-plus");p.setAttribute("title",g.config.labels.zoomin);p.addEventListener("click",function(){g.cropper.zoom(.1)});p.addEventListener("touchstart",function(){g.cropper.zoom(.1)});p.appendChild(r);return p},P=function(){var r=document.createElement("i"),p=document.createElement("button");p.setAttribute("class","btn btn-default");r.setAttribute("class","fa fa-search-minus");p.setAttribute("title",
g.config.labels.zoomout);p.addEventListener("click",function(){g.cropper.zoom(-.1)});p.addEventListener("touchstart",function(){g.cropper.zoom(-.1)});p.appendChild(r);return p},Q=function(){var r=document.createElement("i"),p=document.createElement("button");p.setAttribute("class","btn btn-default");r.setAttribute("class","fa fa-redo-alt");p.setAttribute("title",g.config.labels.rotateright);p.addEventListener("click",function(){g.cropper.rotate(45)});p.addEventListener("touchstart",function(){g.cropper.rotate(45)});
p.appendChild(r);return p},R=function(){var r=document.createElement("i"),p=document.createElement("button");p.setAttribute("class","btn btn-default");r.setAttribute("class","fa fa-undo-alt");p.setAttribute("title",g.config.labels.rotateleft);p.setAttribute("data-option","-45");p.addEventListener("click",function(){g.cropper.rotate(-45)});p.addEventListener("touchstart",function(){g.cropper.rotate(-45)});p.appendChild(r);return p};this.clear=function(){this.actions.hide();this.image.hide();this.file_input_hidden.val("")};
this.setValue=function(r){this.clear();if(r)if(this.fileHandling){var p={fileName:r};0<=r.indexOf("%7B%")&&(p=JSON.parse(decodeURIComponent(r)));this.image.attr("src","download.php?file="+p.fileName);this.image.show();this.actions.show();this.sendData(p)}else this.file_input_hidden.val(r)};this.file.change(l);this.dropzone.on("drop",l);this.edit.click(function(r){__adianti_block_ui();g.url=g.image[0].src;w();__adianti_unblock_ui();r.preventDefault()});this.remove.click(function(r){var p=$("#timagecropper_"+
g.field)[0];if(g.fileHandling){var x=E();x.delFile=x.fileName;x.fileName="";x.newFile="";x.delFile==x.newFile&&(x="");A(x);p.src=" "}else p=$("#timagecropper_"+g.field)[0],g.url=null,p.src=" ",A("");g.actions.hide();g.placeholder.show();r.preventDefault()})};function timagecropper_start(a,b,c,d,h,f,e,m,t,k){b=new TImageCropper(a,b,c,d,h,f,e,m,t,k);$("input[name="+a+"]")[0].timagecropper=b};function tarrowstep_disable_field(a){$(`.arrow_steps_${a}`).addClass("disabled")}function tarrowstep_enable_field(a){$(`.arrow_steps_${a}`).removeClass("disabled")}function tarrowstep_clear(a){$(`.arrow_steps_${a} .step`).removeClass("current");$(`input[name='${a}']`).val("")}
function tarrowstep_set_current(a,b){$(`.arrow_steps_${a} .step`).removeClass("current");$(`input[name='${a}']`).val(b);var c=!0;$(`.arrow_steps_${a} .step`).each(function(d,h){c&&$(h).addClass("current");$(h).data("key")==b&&(c=!1)})}
function tarrowstep_start(a){$(`.arrow_steps_${a} .step`).on("click",function(){tarrowstep_set_current(a,$(this).data("key"))});$(`.arrow_steps_${a} .step`).on("mouseenter",function(){var b=$(this).data("key"),c=!0;$(`.arrow_steps_${a} .step`).each(function(d,h){c&&$(h).addClass("preview-current");$(h).data("key")==b&&(c=!1)})});$(`.arrow_steps_${a} .step`).on("mouseleave",function(){$(`.arrow_steps_${a} .step`).removeClass("preview-current")})};function tgantt_start(a,b,c,d,h){tgantt_set_height(a);$(a).data("pixelStep",d);$(a).data("minuteStep",c);$(a).data("lastHour",0);h&&tgantt_set_update_action(a,h);b&&tgantt_set_day_action(a,b)}
function tgantt_set_day_action(a,b){$(a+" .tgantt-event").on("click",function(c){c.stopPropagation();c.preventDefault();__adianti_load_page($(this).attr("href"))});$(a+" .tgantt-cell").on("click",function(){var c=$(this).closest("tr").data();__adianti_load_page(b+"&start_time="+$(this).data("date")+"&group_id="+c.id)})}function tgantt_format_date(a){return moment(a).format("YYYY-MM-DD HH:mm:ss")}
function tgantt_set_update_action(a,b){var c=$(a).data("pixelStep");$(a+" .tgantt-event").draggable({addClasses:!1,delay:50,axis:"x",grid:[c,100],drag:function(d,h){tgantt_update_data_title(a,h)},stop:function(d,h){d.stopPropagation();if(0>h.position.left){var f=h.helper.width();d=Math.abs(h.position.left);var e=parseInt(h.helper.css("margin-left"));f+(e-d)<=c&&(d=-1*(e+f)+parseFloat(c),h.helper.css("left",d+"px"),h.position.left=d)}else f=h.helper.parent().parent().width(),d=Math.abs(h.position.left),
h.helper.width(),e=parseInt(h.helper.css("margin-left")),d+e>=f&&(d=f-e-parseFloat(c),h.helper.css("left",d+"px"),h.position.left=d);f=tgantt_get_time_drag(a,h);d=JSON.parse(base64_decode(h.helper.attr("data")));var m=new Date(d.start_time);m.setTime(m.getTime()+36E5*f);e=new Date(d.end_time);e.setTime(e.getTime()+36E5*f);f=d.id;m=tgantt_format_date(m);e=tgantt_format_date(e);d.start_time=m;d.end_time=e;h.helper.attr("data",base64_encode(JSON.stringify(d)));__adianti_ajax_exec(b+"&id="+f+"&key="+
f+"&start_time="+m+"&end_time="+e)}}).resizable({addClasses:!1,delay:100,handles:"e,w",axis:"x",grid:[c,10],stop:function(d,h){d.stopPropagation();d.preventDefault();var f=$(this).data("ui-resizable").axis,e="e"==f?0<$(this).data("ui-resizable").size.width-$(this).data("ui-resizable").originalSize.width?"right":"left":0>$(this).data("ui-resizable").size.width-$(this).data("ui-resizable").originalSize.width?"right":"left",m=tgantt_get_time_resize(a,h);d=JSON.parse(base64_decode(h.helper.attr("data")));
var t=d.id;"w"==f?(f=new Date(d.start_time),"left"==e?f.setTime(f.getTime()-36E5*Math.abs(m)):f.setTime(f.getTime()+36E5*Math.abs(m)),e=tgantt_format_date(f),m=d.end_time):(f=new Date(d.end_time),"left"==e?f.setTime(f.getTime()-36E5*Math.abs(m)):f.setTime(f.getTime()+36E5*Math.abs(m)),e=d.start_time,m=tgantt_format_date(f));d.start_time=e;d.end_time=m;h.helper.attr("data",base64_encode(JSON.stringify(d)));__adianti_ajax_exec(b+"&id="+t+"&key="+t+"&start_time="+e+"&end_time="+m)}})}
function tgantt_update_data_title(a,b){if(1>$(".tooltip").length)return!1;b=tgantt_get_time_drag(b);var c=$(".tooltip"),d=c.position().left,h=$(a).data("lastHour"),f=$(a).data("pixelStep");if(h==b)return!1;b>h?c.css("left",d+parseInt(f)+"px"):c.css("left",d-f+"px");$(a).data("lastHour",b)}function tgantt_set_height(a){let b=[];$(a+" .table-content tr").each(function(){b.push($(this).outerHeight())});b.reverse();$(a+" .table-rows tr").each(function(){$(this).outerHeight(b.pop())})}
function tgantt_get_steps(a){return a.position.left-a.originalPosition.left}function tgantt_get_time_drag(a,b){b=tgantt_get_steps(b);var c=$(a).data("pixelStep");a=$(a).data("minuteStep");return 0==b?0:b/c*a/60}function tgantt_get_time_resize(a,b){var c=tgantt_get_time_drag(a,b),d=$(a).data("pixelStep");a=$(a).data("minuteStep");if(0!=c)return c;b=b.size.width-b.originalSize.width;return 0==b?0:b/d*a/60};Adianti.translation={en:{large_file:"The file is too large. The upload limit is ",success:"Success"},pt:{large_file:"O arquivo \u00e9 muito grande. O limite de carregamento \u00e9 ",success:"Sucesso"},es:{large_file:"El archivo es demasiado grande. El l\u00edmite de carga es ",success:"\u00c9xito"}};function _t(a){return Adianti.translation[Adianti.language][a]??a};function bimagecarousel_start(a,b,c,d){setTimeout(function(){var h=new Splide("#"+a,b);if(c){var f=new Splide("#"+c,d);h.sync(f)}h.mount();c&&f.mount()},10)};


function tselect_enable_field(form_name, field) {
  if(typeof form_name != 'undefined' && form_name != '') {
      form_name_sel = 'form[name="'+form_name+'"] ';
  }
  else {
      form_name_sel = '';
  }

  var selector = '[name="'+field+'[]"]';
  if (field.indexOf('[') == -1 && $('#'+field).length >0) {
      var selector = '#'+field;
  }
  
  try {
      if ($(form_name_sel + selector).attr('role') == 'tselectsearch') {
          tmultisearch_enable_field(form_name, field);
      }
      else {
          $(form_name_sel + selector).attr('onclick', null);
          $(form_name_sel + selector).css('pointer-events',   'auto');
          $(form_name_sel + selector).removeClass('tcombo_disabled');
      }
  } catch (e) {
      console.log(e);
  }
}

function tselect_disable_field(form_name, field) {
  if(typeof form_name != 'undefined' && form_name != '') {
      form_name_sel = 'form[name="'+form_name+'"] ';
  }
  else {
      form_name_sel = '';
  }

  var selector = '[name="'+field+'[]"]';
  if (field.indexOf('[') == -1 && $('#'+field).length >0) {
      var selector = '#'+field
  }
  
  try {
      if ($(form_name_sel + selector).attr('role') == 'tselectsearch') {
          tmultisearch_disable_field(form_name, field);
      }
      else {
          $(form_name_sel + selector).attr('onclick', 'return false');
          $(form_name_sel + selector).attr('tabindex', '-1');
          $(form_name_sel + selector).css('pointer-events', 'none');
          $(form_name_sel + selector).addClass('tcombo_disabled');
      }
  } catch (e) {
      console.log(e);
  }
}

function tseekbutton_enable_field(form_name, field) {
    try {
        $('form[name='+form_name+'] [name='+field+']').attr('readonly', false);
        $('form[name='+form_name+'] [name='+field+']').removeClass('tfield_disabled').addClass('tseekentry');
    } catch (e) {
        console.log(e);
    }
    setTimeout(function(){ $('form[name='+form_name+'] [for='+field+']').show() },1);
} 
                            
function tseekbutton_disable_field(form_name, field) {
    try {
        $('form[name='+form_name+'] [name='+field+']').attr('readonly', true);
        $('form[name='+form_name+'] [name='+field+']').addClass('tfield_disabled').removeClass('tseekentry');
    } catch (e) {
        console.log(e);
    }
    setTimeout(function(){ $('form[name='+form_name+'] [for='+field+']').hide() },1);
}

function tfieldlist_reset_fields(row, clear_fields)
{
    var uniqid = parseInt(Math.random() * 100000000);
    $(row).attr('id', uniqid);
    var fields = $(row).find('input,select,textarea');
    var newids = [];
    
    $.each(fields, function(index, field)
    {
        var field_id = $(field).attr('id');
        var field_component = $(field).attr('widget');
        var field_role = $(field).attr('role');

        if (typeof field_id !== "undefined")
        {
            var field_id_parts = field_id.split('_');
            field_id_parts.pop();
            var field_prefix = field_id_parts.join('_');
            var new_id = field_prefix + '_' + uniqid;
            var parent = $(field).parent();
            
            if (newids.indexOf(new_id) >= 0 )
            {
                var new_id = field_prefix + parseInt(Math.random() * 100) + '_' + uniqid;
            }
            newids.push(new_id);
            
            if (field_component == 'tdate' || field_component == 'ttime' || field_component == 'tdatetime')
            {
                // realocate in dom
                $(field).attr('id', new_id);
                if (clear_fields) {
                    $(field).val('');
                }
                
                if (typeof $(field).attr('exitaction') !== 'undefined') {
                    $(field).attr('exitaction', $(field).attr('exitaction').replace(field_id, new_id));
                }
                if (typeof $(field).attr('onblur') !== 'undefined') {
                    $(field).attr('onblur', $(field).attr('onblur').replace(field_id, new_id));
                }
                if (typeof $(field).attr('changection') !== 'undefined') {
                    $(field).attr('changection', $(field).attr('changection').replace(field_id, new_id));
                }
                if (typeof $(field).attr('onchange') !== 'undefined') {
                    $(field).attr('onchange', $(field).attr('onchange').replace(field_id, new_id));
                }
                
                grandparent = $(parent).parent();
                field = $(field).detach()
                $(parent).remove();
                grandparent.append(field);
                
                var script_filter = field_component;
                if (field_component == 'ttime') {
                  var script_filter = 'tdatetime';
                }
                
                var re = new RegExp(field_id, 'g');
                tfieldlist_execute_scripts(grandparent, script_filter, function(script_content) {
                    script_content = script_content.replace(re, new_id);
                    return script_content;
                });
            }
            else if (field_component =='tentry')
            {
                parent = $(field).closest('td');
                $(field).attr('id', new_id);
                if (clear_fields) {
                    if(!$(field).attr('name').match('/__row__id/'))
                    {
                        $(field).val('');
                    }
                }
                
                if (typeof $(field).attr('exitaction') !== 'undefined') {
                    $(field).attr('exitaction', $(field).attr('exitaction').replace(field_id, new_id));
                }
                if (typeof $(field).attr('onblur') !== 'undefined') {
                    $(field).attr('onblur', $(field).attr('onblur').replace(field_id, new_id));
                }
                
                var re = new RegExp(field_id, 'g');
                tfieldlist_execute_scripts(parent, 'tentry', function(script_content) {
                    script_content = script_content.replace(re, new_id);
                    return script_content;
                });
            }
            else if (field_component =='ttext')
            {
                parent = $(field).closest('td');
                $(field).attr('id', new_id);
                if (clear_fields) {
                    if(!$(field).attr('name').match('/__row__id/'))
                    {
                        $(field).val('');
                    }
                }
                
                if (typeof $(field).attr('exitaction') !== 'undefined') {
                    $(field).attr('exitaction', $(field).attr('exitaction').replace(field_id, new_id));
                }
                if (typeof $(field).attr('onblur') !== 'undefined') {
                    $(field).attr('onblur', $(field).attr('onblur').replace(field_id, new_id));
                }
                
                var re = new RegExp(field_id, 'g');
                tfieldlist_execute_scripts(parent, 'ttext', function(script_content) {
                    script_content = script_content.replace(re, new_id);
                    return script_content;
                });
            }
            else if (field_component =='tspinner')
            {
                $(field).attr('id', new_id);
                if (clear_fields) {
                    $(field).val('');
                }
                
                if (typeof $(field).attr('exitaction') !== 'undefined') {
                    $(field).attr('exitaction', $(field).attr('exitaction').replace(field_id, new_id));
                }
                if (typeof $(field).attr('onblur') !== 'undefined') {
                    $(field).attr('onblur', $(field).attr('onblur').replace(field_id, new_id));
                }
                
                grandparent = $(parent).parent();
                field = $(field).detach()
                $(parent).remove();
                grandparent.append(field);
                
                var re = new RegExp(field_id, 'g');
                tfieldlist_execute_scripts(grandparent, 'tspinner', function(script_content) {
                    script_content = script_content.replace(re, new_id);
                    return script_content;
                });
            }
            else if (field_component =='tcolor')
            {
                // realocate in dom
                $(field).attr('id', new_id);
                if (clear_fields) {
                    $(field).val('');
                }
                
                if (typeof $(field).attr('exitaction') !== 'undefined') {
                    $(field).attr('exitaction', $(field).attr('exitaction').replace(field_id, new_id));
                }
                if (typeof $(field).attr('onblur') !== 'undefined') {
                    $(field).attr('onblur', $(field).attr('onblur').replace(field_id, new_id));
                }
                
                grandparent = $(parent).parent();
                grandparent.find('.pickr').replaceWith('<span class="input-group-addon tcolor"><i class="tcolor-icon"></i></span>');
                
                var re = new RegExp(field_id, 'g');
                tfieldlist_execute_scripts(grandparent, 'tcolor', function(script_content) {
                    script_content = script_content.replace(re, new_id);
                    return script_content;
                });
            }
            else if (field_component =='thidden')
            {
                $(field).attr('id', new_id);
                if ($(field).attr('uniqid') == 'true') {
                    $(field).val(parseInt(Math.random() * 10000000000));
                }
                else if (clear_fields) {
                    $(field).val('');
                }
                
                var re = new RegExp(field_id, 'g');
                tfieldlist_execute_scripts(parent, 'thidden', function(script_content) {
                    script_content = script_content.replace(re, new_id);
                    return script_content;
                });
            }
            else if (field_component =='tdbmultisearch' || field_component =='tdbuniquesearch')
            {
                $(field).attr('id', new_id);
                $(field).removeData('select2-id').removeAttr('data-select2-id').find('option').removeAttr('data-select2-id');
                $(row).removeData('select2-id').removeAttr('data-select2-id');
                
                // remove select2 container previously processed
                $(parent).find('.select2-container').remove();
                
                var re = new RegExp(field_id, 'g');
                tfieldlist_execute_scripts(parent, 'tdbmultisearch', function(script_content) {
                    script_content = script_content.replace(re, new_id);
                    return script_content;
                });
                
                if (clear_fields) {
                    setTimeout(function() { $(field).val('').trigger('change.select2'); }, 10 );
                }
            }
            else if (field_component =='tmultisearch' || field_component =='tuniquesearch')
            {
                $(field).attr('id', new_id);
                $(field).removeData('select2-id').removeAttr('data-select2-id').find('option').removeAttr('data-select2-id');
                $(row).removeData('select2-id').removeAttr('data-select2-id');
                
                $(parent).find('.select2-container').remove();
                
                var re = new RegExp(field_id, 'g');
                tfieldlist_execute_scripts(parent, 'tmultisearch', function(script_content) {
                    script_content = script_content.replace(re, new_id);
                    return script_content;
                });
                
                if (clear_fields) {
                    setTimeout(function() { $(field).val('').trigger('change.select2'); }, 10 );
                }
            }
            else if (field_component =='tcombo')
            {
                $(field).attr('id', new_id);
                
                if (clear_fields) {
                    $(field).val('');
                }
                if (field_role == 'tcombosearch') {
                    // clear data attributes
                    $(field).removeData('select2-id').removeAttr('data-select2-id').find('optgroup').removeAttr('data-select2-id');
                    $(field).removeData('select2-id').removeAttr('data-select2-id').find('option').removeAttr('data-select2-id');
                    $(field).removeData('select2-id').removeAttr('data-select2-id').find('optgroup').find('option').removeAttr('data-select2-id');
                    $(row).removeData('select2-id').removeAttr('data-select2-id');
                    $(parent).find('.select2-container').remove();
                }
                
                if (typeof $(field).attr('changeaction') !== 'undefined') {
                    $(field).attr('changeaction', $(field).attr('changeaction').replace(field_id, new_id));
                }
                if (typeof $(field).attr('onchange') !== 'undefined') {
                    $(field).attr('onchange', $(field).attr('onchange').replace(field_id, new_id));
                }
                
                var re = new RegExp(field_id, 'g');
                tfieldlist_execute_scripts(parent, 'tcombo', function(script_content) {
                    script_content = script_content.replace(re, new_id);
                    return script_content;
                });
            }
            else if (field_component =='tfile')
            {
                $(field).attr('id', new_id);
                
                if (clear_fields) {
                    $(field).val('');
                }
                
                var parent = $(field).closest('td');
                var file_wrapper_id = parent.find('.div_file').attr('id');
                var new_file_wrapper_id = 'div_file_' + uniqid;
                
                parent.find('.tfile_row_wrapper').remove();
                parent.find('.file-response-icon').remove();
                parent.find('.div_file').attr('id', new_file_wrapper_id);
                $(field).css('padding-left', '5px');
                
                if (typeof $(field).attr('changeaction') !== 'undefined') {
                    $(field).attr('changeaction', $(field).attr('changeaction').replace(field_id, new_id));
                }
                if (typeof $(field).attr('onchange') !== 'undefined') {
                    $(field).attr('onchange', $(field).attr('onchange').replace(field_id, new_id));
                }
                
                var re  = new RegExp(field_id, 'g');
                var re2 = new RegExp(file_wrapper_id, 'g');
                tfieldlist_execute_scripts(parent, 'tfile', function(script_content) {
                    script_content = script_content.replace(re,  new_id);
                    script_content = script_content.replace(re2, new_file_wrapper_id);
                    return script_content;
                });
            }
        }
        
        // fora do if pois não troca ID (não possui ID), só reinicia value
        if (field_component =='tradiobutton')
        {
            $(field).parent().removeClass('active');
        }
        else if (field_component =='tcheckbutton')
        {
            $(field).parent().removeClass('active');
        }
    });

    $(row).find("[name$='__row__id[]']").val(uniqid);
}